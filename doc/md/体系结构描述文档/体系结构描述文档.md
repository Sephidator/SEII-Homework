体系结构描述文档——<br/>灯具进销存管理系统<br/><br/>软工二小组
=========================



<br/>
<br/>
<br/>

# 更新历史
| **修改人员**           | **日期**     | **变更原因** | **版本** |
| ------------------ | ---------- | -------- | ------ |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-10-10 | 最初版本     | V1.0   |

<br/>
<br/>
***********************************************
<br/>
<br/>

# 变更记录
| **修改人员**           | **日期**     | **变更原因** | **版本** | **变更内容** |
| ------------------ | ---------- | -------- | ------ | -------- |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-10-10 | 初始版本     | V1.0   | 无        |

<br/>
<br/>
***********************************************
<br/>
<br/>

# 目录
	1.引言
		1.1 编制目的
		1.2 参考资料
	2.产品概述
	3.逻辑视角
	4.组合视角
		4.1 开发包图
		4.2 运行时进程
		4.3 物理部署
	5.接口视角
		5.1 模块的职责
		5.2 用户界面层的分解
		5.3 业务逻辑层的分解
		5.4 数据层的分解
	6.信息视角
		6.1 数据持久化对象
		6.2 Txt持久化格式
		6.3 数据库表

<br/>
<br/>
***********************************************
<br/>
<br/>

# 1.引言

## 1.1 编制目的
本报告详细完成对灯具照明行业进销存系统的概要设计，达到指导详细设计和开发的目
的，同时实现测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户编写，是了解系统的导航。

<br/>

## 1.2 参考资料
附录D.3 连锁商店（MSCS）软件体系描述结构文档

<br/>
<br/>
***********************************************
<br/>
<br/>

# 2.产品概述
参考灯具照明行业进销存系统用例文档和灯具照明行业进销存系统软件规格说明中对产
品的概括描述。

<br/>
<br/>
***********************************************
<br/>
<br/>

# 3.逻辑视角
灯具进销存管理系统中，选择了分层体系结构的风格，将系统分为3层（展示层、业务逻辑层、数据层）能够很好的示意整个高层抽象。展示层包括GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如图1和图2所示。

![](/pics/体系结构逻辑视角.png)
![](/pics/体系结构逻辑设计方案.png)

<br/>
<br/>
***********************************************
<br/>
<br/>

# 4.组合视角
## 4.1 开发包图
灯具进销存管理系统的最终开发包设计如表1所示

| 表1                   | 灯具进销存管理系统最终开发包设计                         |
| -------------------- | ---------------------------------------- |
| 开发（物理）包              | 依赖的其他开发包                                 |
| mainui               | goodssortui, goodsui, inventoryui, clientui, purchaseui, saleui, reportui, accountui, billui, initialui, approvalui, promotionui, userui, logui, vo |
|                      |                                          |
| goodssortui          | goodssortblservice, 界面类库包, vo            |
| goodssortblservice   |                                          |
| goodssortbl          | goodssortblservice, goodssortdataservice, po, goodsbl |
| goodssortdataservice | Java RMI, po                             |
| goodssortdata        | databaseutility, po, goodssortdataservice |
|                      |                                          |
| goodsui              | goodsblservice, 界面类库包, vo                |
| goodsblservice       |                                          |
| goodsbl              | goodsblservice, goodsdataservice, po     |
| goodsdataservice     | Java RMI, po                             |
| goodsdata            | databaseutility, po, goodsdataservice    |
|                      |                                          |
| inventoryui          | inventoryblservice, 界面类库包, vo            |
| inventoryblservice   |                                          |
| inventorybl          | inventoryblservice, inventorydataservice, po, goodsbl,userbl |
| inventorydataservice | Java RMI, po                             |
| inventorydata        | databaseutility, po, inventorydataservice |
|                      |                                          |
| clientui             | clientblservice, 界面类库包, vo               |
| clientblservice      |                                          |
| clientbl             | clientblservice, clientdataservice, po   |
| clientdataservice    | Java RMI, po                             |
| clientdata           | databaseutility, po, clientdataservice   |
|                      |                                          |
| purchaseui           | purchaseblservice, 界面类库包, vo             |
| purchaseblservice    |                                          |
| purchasebl           | purchaseblservice, purchasedataservice, po, goodsbl, clientbl, accountbl, inventorybl, userbl |
| purchasedataservice  | Java RMI, po                             |
| purchasedata         | databaseutility, po, purchasedataservice |
|                      |                                          |
| saleui              | saleblservice, 界面类库包, vo                |
| saleblservice       |                                          |
| salebl              | saleblservice, saledataservice, po, goodsbl, clientbl, accountbl, inventorybl, userbl |
| saledataservice     | Java RMI, po                             |
| saledata            | databaseutility, po, saledataservice    |
|                      |                                          |
| reportui             | reportblservice, 界面类库包, vo               |
| reportblservice      |                                          |
| reportbl             | reportblservice, reportdataservice, po, inventorybl, purchasebl, saleui, billbl |
| reportdataservice    | Java RMI, po                             |
| reportdata           | databaseutility, po, reportdataservice   |
|                      |                                          |
| accountui            | accountblservice, 界面类库包, vo              |
| accountblservice     |                                          |
| accountbl            | accountblservice, accountdataservice, po |
| accountdataservice   | Java RMI, po                             |
| accountdata          | databaseutility, po, accountdataservice  |
|                      |                                          |
| billui               | billblservice, 界面类库包, vo                 |
| billblservice        |                                          |
| billbl               | billblservice, billdataservice, po, accountbl, userbl |
| billdataservice      | Java RMI, po                             |
| billdata             | databaseutility, po, billdataservice     |
|                      |                                          |
| initialui            | initialblservice, 界面类库包, vo              |
| initialblservice     |                                          |
| initialbl            | initialblservice, initialdataservice, po, goodsbl, client, accountbl |
| initialdataservice   | Java RMI, po                             |
| initialdata          | databaseutility, po, initialdataservice  |
|                      |                                          |
| approvalui           | approvalblservice, 界面类库包, vo             |
| approvalblservice    |                                          |
| approvalbl           | approvalblservice, approvaldataservice, po, inventorybl, purchasebl, saleui, billbl |
| approvaldataservice  | Java RMI, po                             |
| approvaldata         | databaseutility, po, approvaldataservice |
|                      |                                          |
| promotionui          | promotionblservice, 界面类库包, vo            |
| promotionblservice   |                                          |
| promotionbl          | promotionblservice, promotiondataservice, po, goodsbl, salebl, clientbl, accountbl |
| promotiondataservice | Java RMI, po                             |
| promotiondata        | databaseutility, po, promotiondataservice |
|                      |                                          |
| userui               | userblservice, 界面类库包, vo                 |
| userblservice        |                                          |
| userbl               | userblservice, userdataservice, po       |
| userdataservice      | Java RMI, po                             |
| userdata             | databaseutility, po, userdataservice     |
|                      |                                          |
| logui                | logblservice, 界面类库包, vo                  |
| logblservice         |                                          |
| logbl                | logblservice, logdataservice, po, inventorybl, purchasebl, saleui, billbl, userbl |
| logdataservice       | Java RMI, po                             |
| logdata              | databaseutility, po, logdataservice      |
<br/>

灯具进销存管理系统客户端开发包图和服务器端开发包图如图3和图4所示。

![](/pics/客户端开发包图.png)
![](/pics/服务器端开发包图.png)

<br/>

## 4.2 运行时进程
在灯具进销存管理系统中，会有多个客户端进程和一个服务器端进程，其进程如图5所示。结合部署图，客户端进程是在客户端机器上运行，服务器端进程是在服务器端机器上运行。

![](/pics/进程图.png)

<br/>

## 4.3 物理部署
灯具进销存管理系统中客户端构件是放在客户端机上，服务器端构件是放在服务器端机器上。在客户端节点上，还要部署RMIStub构件。由于Java RMI 构件属于JDK 1.8的一部分。所以，在系统JDK环境已经设置好的情况下，不需要独立部署。部署图如图6所示。

![](/pics/部署图.png)

<br/>
<br/>
***********************************************
<br/>
<br/>

# 5.接口视角
## 5.1 模块的职责
客户端模块和服务器模块视图分别如图7和图8所示。客户端各层和服务器端各层的职责分别如表2和表3所示。

![](/pics/客户端与服务器端模块视图.png)

| 表2      | 客户端各层的职责               |
| ------- | ---------------------- |
| 层       | 职责                     |
| 启动模块    | 负责初始化网络通信机制，启动用户界面     |
| 用户界面层   | 基于窗口的进销存管理系统客户端用户界面    |
| 业务逻辑层   | 对于用户界面的输入进行响应并进行业务处理逻辑 |
| 客户端网络模块 | 利用java RMI机制查找RMI服务    |
<br/>

| 表3       | 服务器端各层的职责                   |
| -------- | --------------------------- |
| 层        | 职责                          |
| 启动模块     | 负责初始化网络通信机制，启动用户界面          |
| 数据层      | 负责数据的持久化及数据访问接口             |
| 服务器端网络模块 | 利用Java RMI机制开启RMI服务，注册RMI服务 |
<br/>

每一层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用来完成的。层与层之间调用的接口如表4所示。

| 表4                                       | 层与层之间调用的接口 |       |
| ---------------------------------------- | ---------- | ----- |
| 接口                                       | 服务调用方      | 服务提供方 |
| goodssortblservice<br/>goodsblservice<br/>inventoryblservice<br/>clientblservice<br/>purchaseblservice<br/>saleblservice<br/>reportblservice<br/>accountblservice<br/>billblservice<br/>initialblservice<br/>approvalblservice<br/>promotionblservice<br/>userblservice<br/>logblservice |    客户端展示层        |   客户端业务逻辑层    |
|goodssortdataservice<br/>goodsdataservice<br/>inventorydataservice<br/>clientdataservice<br/>purchasedataservice<br/>saledataservice<br/>reportdataservice<br/>accountdataservice<br/>billdataservice<br/>initialdataservice<br/>approvaldataservice<br/>promotiondataservice<br/>userdataservice<br/>logdataservice|	客户端业务逻辑层|	服务器端数据层|
<br/>

借用销售用例来说明层之间的调用，如图9所示。每一层之间都是由上一层依赖了一个接口(需接口)，而下层实现这个接口(供接口)。saleblservice提供了sale界面所需要的所有业务逻辑功能。saledataservice提供了对数据库的增、删、改、查等操作。这样的实现就大大降低了层与层之间的耦合。
