体系结构描述文档——<br/>灯具进销存管理系统<br/><br/>软工二小组
=========================



<br/>
<br/>
<br/>

# 更新历史
| **修改人员**           | **日期**     | **变更原因** | **版本** |
| ------------------ | ---------- | -------- | ------ |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-10-10 | 最初版本     | V1.0   |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-11-11 | 修改接口方法   | V1.1   |

<br/>
<br/>
***********************************************
<br/>
<br/>

# 变更记录
| **修改人员**           | **日期**     | **变更原因** | **版本** | **变更内容** |
| ------------------ | ---------- | -------- | ------ | -------- |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-10-10 | 初始版本     | V1.0   | 无        |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-11-11 | 修改接口方法   | V1.1   | 接口方法     |

<br/>
<br/>
***********************************************
<br/>
<br/>

# 目录
	1.引言
		1.1 编制目的
		1.2 参考资料
	2.产品概述
	3.逻辑视角
	4.组合视角
		4.1 开发包图
		4.2 运行时进程
		4.3 物理部署
	5.接口视角
		5.1 模块的职责
		5.2 用户界面层的分解
		5.3 业务逻辑层的分解
		5.4 数据层的分解
	6.信息视角
		6.1 数据持久化对象
		6.2 Txt持久化格式
		6.3 数据库表

<br/>
<br/>
***********************************************
<br/>
<br/>

# 1.引言

## 1.1 编制目的
本报告详细完成对灯具照明行业进销存系统的概要设计，达到指导详细设计和开发的目
的，同时实现测试人员及用户的沟通。<br/>
本报告面向开发人员、测试人员及最终用户编写，是了解系统的导航。

<br/>
<br/>
***********************************************
<br/>
<br/>

## 1.2 参考资料
附录D.3 连锁商店（MSCS）软件体系描述结构文档

<br/>
<br/>
***********************************************
<br/>
<br/>

# 2.产品概述
参考灯具照明行业进销存系统用例文档和灯具照明行业进销存系统软件规格说明中对产
品的概括描述。

<br/>
<br/>
***********************************************
<br/>
<br/>

# 3.逻辑视角
灯具进销存管理系统中，选择了分层体系结构的风格，将系统分为3层（展示层、业务逻辑层、数据层）能够很好的示意整个高层抽象。展示层包括GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如图1和图2所示。

![](pics/体系结构逻辑视角.png)
![](pics/体系结构逻辑设计方案.png)

<br/>
<br/>
***********************************************
<br/>
<br/>

# 4.组合视角
## 4.1 开发包图
灯具进销存管理系统的最终开发包设计如表1所示

| 表1                   | 连锁商店管理系统的最终开发包设计                         |
| -------------------- | ---------------------------------------- |
| 开发（物理）包              | 依赖的其他开发包                                 |
| mainui               | goodssortui, goodsui, inventoryui, clientui, purchaseui, saleui, reportui, accountui, billui, initialui, approvalui, promotionui, userui, logui,messageui,editbillui, vo |
|                      |                                          |
| goodssortui          | goodssortblservice, 界面类库包, vo            |
| goodssortblservice   |                                          |
| goodssortbl          | goodssortblservice, goodssortdataservice, po, goodsbl |
| goodssortdataservice | Java RMI, po                             |
| goodssortdata        | databaseutility, po, goodssortdataservice |
|                      |                                          |
| goodsui              | goodsblservice, 界面类库包, vo                |
| goodsblservice       |                                          |
| goodsbl              | goodsblservice, goodsdataservice, po     |
| goodsdataservice     | Java RMI, po                             |
| goodsdata            | databaseutility, po, goodsdataservice    |
|                      |                                          |
| inventoryui          | inventoryblservice, 界面类库包, vo            |
| inventoryblservice   |                                          |
| inventorybl          | inventoryblservice, inventorydataservice, po, goodsbl,userbl |
| inventorydataservice | Java RMI, po                             |
| inventorydata        | databaseutility, po, inventorydataservice |
|                      |                                          |
| clientui             | clientblservice, 界面类库包, vo               |
| clientblservice      |                                          |
| clientbl             | clientblservice, clientdataservice, po   |
| clientdataservice    | Java RMI, po                             |
| clientdata           | databaseutility, po, clientdataservice   |
|                      |                                          |
| purchaseui           | purchaseblservice, 界面类库包, vo             |
| purchaseblservice    |                                          |
| purchasebl           | purchaseblservice, purchasedataservice, po, goodsbl, clientbl, accountbl, inventorybl, userbl |
| purchasedataservice  | Java RMI, po                             |
| purchasedata         | databaseutility, po, purchasedataservice |
|                      |                                          |
| saleui               | saleblservice, 界面类库包, vo                 |
| saleblservice        |                                          |
| salebl               | saleblservice, saledataservice, po, goodsbl, clientbl, accountbl, inventorybl, userbl |
| saledataservice      | Java RMI, po                             |
| saledata             | databaseutility, po, saledataservice     |
|                      |                                          |
| reportui             | reportblservice, 界面类库包, vo               |
| reportblservice      |                                          |
| reportbl             | reportblservice, reportdataservice, po, inventorybl, purchasebl, saleui, billbl |
|                      |                                          |
| accountui            | accountblservice, 界面类库包, vo              |
| accountblservice     |                                          |
| accountbl            | accountblservice, accountdataservice, po |
| accountdataservice   | Java RMI, po                             |
| accountdata          | databaseutility, po, accountdataservice  |
|                      |                                          |
| financeui            | billblservice, 界面类库包, vo                 |
| financeblservice     |                                          |
| financebl            | financeblservice, financedataservice, po, accountbl, userbl |
| financedataservice   | Java RMI, po                             |
| financedata          | databaseutility, po, financedataservice  |
|                      |                                          |
| initialui            | initialblservice, 界面类库包, vo              |
| initialblservice     |                                          |
| initialbl            | initialblservice, initialdataservice, po, goodsbl, client, accountbl |
| initialdataservice   | Java RMI, po                             |
| initialdata          | databaseutility, po, initialdataservice  |
|                      |                                          |
| approvalui           | approvalblservice, 界面类库包, vo             |
| approvalblservice    |                                          |
| approvalbl           | approvalblservice, approvaldataservice, po, inventorybl, purchasebl, saleui, billbl |
|                      |                                          |
| promotionui          | promotionblservice, 界面类库包, vo            |
| promotionblservice   |                                          |
| promotionbl          | promotionblservice, promotiondataservice, po, goodsbl, salebl, clientbl, accountbl |
| promotiondataservice | Java RMI, po                             |
| promotiondata        | databaseutility, po, promotiondataservice |
|                      |                                          |
| userui               | userblservice, 界面类库包, vo                 |
| userblservice        |                                          |
| userbl               | userblservice, userdataservice, po       |
| userdataservice      | Java RMI, po                             |
| userdata             | databaseutility, po, userdataservice     |
|                      |                                          |
| logui                | logblservice, 界面类库包, vo                  |
| logblservice         |                                          |
| logbl                | logblservice, logdataservice, po, inventorybl, purchasebl, saleui, billbl, userbl |
| logdataservice       | Java RMI, po                             |
| logdata              | databaseutility, po, logdataservice      |
|                      |                                          |
| loginui              | loginblservice, 界面类库包, vo                |
| loginblservice       |                                          |
| loginbl              | logindataservice,po                      |
|                      |                                          |
| logdataservice       | Java RMI, po                             |
| logdata              | databaseutility, po, logindataservice    |
| messageui            | messageblservice, 界面类库包, vo              |
| messageblservice     |                                          |
| messagebl            | messageblservice, systenfunctiondataservice, po, userbl |
| messagedataservice   | Java RMI, po                             |
| messagedata          | databaseutility, po, logdataservice      |
|                      |                                          |
| vo                   |                                          |
| po                   |                                          |
| blutility            |                                          |
| datautility          | JDBC                                     |
| 界面类库包                |                                          |
| Java RMI             |                                          |

<br/>

灯具进销存管理系统客户端开发包图和服务器端开发包图如图3和图4所示。

![](pics/客户端开发包图.png)
![](pics/服务器端开发包图.png)

<br/>
<br/>
***********************************************
<br/>
<br/>

## 4.2 运行时进程
在灯具进销存管理系统中，会有多个客户端进程和一个服务器端进程，其进程如图5所示。结合部署图，客户端进程是在客户端机器上运行，服务器端进程是在服务器端机器上运行。

![](pics/进程图.png)

<br/>
<br/>
***********************************************
<br/>
<br/>

## 4.3 物理部署
灯具进销存管理系统中客户端构件是放在客户端机上，服务器端构件是放在服务器端机器上。在客户端节点上，还要部署RMIStub构件。由于Java RMI 构件属于JDK 1.8的一部分。所以，在系统JDK环境已经设置好的情况下，不需要独立部署。部署图如图6所示。

![](pics/部署图.png)

<br/>
<br/>
***********************************************
<br/>
<br/>

# 5.接口视角
## 5.1 模块的职责
客户端模块和服务器模块视图分别如图7和图8所示。客户端各层和服务器端各层的职责分别如表2和3所示。

![](pics/客户端与服务器端模块视图.png)

| 表2      | 客户端各层的职责               |
| ------- | ---------------------- |
| 客户端各层   | 客户端各层的职责               |
| 启动模块    | 负责初始化网络通信机制，启动用户界面     |
| 用户界面层   | 基于窗口的进销存管理系统客户端用户界面    |
| 业务逻辑层   | 对于用户界面的输入进行响应并进行业务处理逻辑 |
| 客户端网络模块 | 利用java RMI机制查找RMI服务    |
<br/>

| 表3       | 服务器端各层的职责                   |
| -------- | --------------------------- |
| 服务器端各层   | 服务器端各层的职责                   |
| 启动模块     | 负责初始化网络通信机制，启动用户界面          |
| 数据层      | 负责数据的持久化及数据访问接口             |
| 服务器端网络模块 | 利用Java RMI机制开启RMI服务，注册RMI服务 |
<br/>

每一层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用来完成的。层与层之间调用的接口下表4所示。

| 表4                                       | 层之间调用的接口 |          |
| ---------------------------------------- | -------- | -------- |
| 接口                                       | 服务调用方    | 服务提供方    |
| goodssortblservice<br/>goodsblservice<br/>inventoryblservice<br/>clientblservice<br/>purchaseblservice<br/>saleblservice<br/>reportblservice<br/>accountblservice<br/>billblservice<br/>initialblservice<br/>approvalblservice<br/>promotionblservice<br/>userblservice<br/>logblservice<br/>editbillblservice<br/>messageblservice<br/>loginblservice | 客户端展示层   | 客户端业务逻辑层 |
| goodssortdataservice<br/>goodsdataservice<br/>inventorydataservice<br/>clientdataservice<br/>purchasedataservice<br/>saledataservice<br/>reportdataservice<br/>accountdataservice<br/>billdataservice<br/>initialdataservice<br/>approvaldataservice<br/>promotiondataservice<br/>userdataservice<br/>logdataservice<br/>editbilldataservice<br/>messagedataservice | 客户端业务逻辑层 | 服务器端数据层  |
<br/>

借用登陆操作来说明层之间的调用，如图9所示。每一层之间都是由上一层依赖了一个接口(需接口)，而下层实现这个接口(供接口)。LoginBlService提供了LoginUI界面所需要的所有业务逻辑功能。LoginDataService提供了对数据库的增、删、改、查等操作。这样的实现就大大降低了层与层之间的耦合。

![](pics/登陆操作时层之间调用的接口.png)

<br/>
<br/>
***********************************************
<br/>
<br/>

## 5.2 用户界面层的分解
根据需求，系统存在38个用户界面：登录界面，库存管理主界面，进货销售主界面，财务管理主界面，总经理主界面，管理员主界面，商品分类管理界面，商品分类信息界面，商品管理界面，商品信息界面，库存查看界面，库存盘点界面，库存溢损单界面，修改库存类单据界面，客户管理界面，客户信息界面，制定进货单界面，制定进货退货单界面，制定销售单界面，制定销售退货单界面，修改进销类单据界面，账户管理界面，账户信息界面，制定收款单界面，制定付款单界面，制定现金费用单界面，查看经营历程表界面，查看经营情况表界面，查看销售明细表界面，期初建账界面，修改财务单据界面，查看日志界面，审批单据界面，促销策略管理界面，促销策略信息界面，库存赠送单界面，账号管理界面，账号信息界面。界面跳转如图10所示。

![](pics/用户界面跳转.png)

服务器端和客户端的用户界面设计接口是一致的，只是具体的界面不一样。用户界面类如图11所示。

![](pics/用户界面类.png)

### 5.2.1 用户界面层模块的职责
如下表5所示为用户界面层模块的职责

| 表5        | 用户界面层模块的职责            |
| --------- | --------------------- |
| 模块        | 职责                    |
| MainFrame | 界面Frame，负责界面的显示和界面的跳转 |
<br/>

### 5.2.2 用户界面层模块的接口规范
用户界面层模块的接口规范如表6所示

| 表6        | 用户界面层模块的接口规范 |                     |
| --------- | ------------ | ------------------- |
| MainFrame | 语法           | init(args:String[]) |
|           | 前置条件         | 无                   |
|           | 后置条件         | 显示Frame以及LoginPanel |
<br/>

用户界面层需要的服务接口如表7所示

| 表7                                    | 用户界面层需要的服务接口      |
| ------------------------------------- | ----------------- |
| 服务名                                   | 服务                |
| `businesslogicservice.LoginBLService` | 登录界面的逻辑接口         |
| `businesslogicservice.*BLService`     | 每个界面都有一个相应的业务逻辑接口 |

<br/>
<br/>
***********************************************
<br/>
<br/>

## 5.3 业务逻辑层的分解
业务逻辑层包括多个针对界面的业务逻辑处理对象。其设计图如图12所示。

![](pics/业务逻辑层的设计.png)

### 5.3.1 业务逻辑层模块的职责
业务逻辑层模块的职责如下表所示

| 业务逻辑层模块     | 职责                      |
| ----------- | ----------------------- |
| goodssortbl | 负责实现商品分类与商品分类管理界面所需要的服务 |
| goodsbl     | 负责实现商品与商品管理界面所需要的服务     |
| inventorybl | 负责实现仓库管理界面所需要的服务        |
| clientbl    | 负责实现客户管理界面所需要的服务        |
| purchasebl  | 负责实现进货界面所需要的服务          |
| salebl      | 负责实现销售界面所需要的服务          |
| reportbl    | 负责实现查看报表界面所需要的服务        |
| accountbl   | 负责实现账户管理界面所需要的服务        |
| financebl   | 负责实现财务单据界面所需要的服务        |
| initialbl   | 负责实现期初建账界面所需要的服务        |
| approvalbl  | 负责实现审批界面所需要的服务          |
| promotionbl | 负责实现销售策略界面所需要的服务        |
| userbl      | 负责实现登陆及用户管理界面所需要的服务     |
| logbl       | 负责实现查看日志界面所需要的服务        |
| loginbl     | 负责实现登陆界面所需要的服务          |
| messagebl   | 负责查看系统信息界面所需要的服务        |
<br/>

### 5.3.2 业务逻辑层模块的接口规范

| goodssortbl模块提供的服务（供接口）               |      |                                          |
| ------------------------------------- | ---- | ---------------------------------------- |
| `GoodsSortBlService.getGoodsSortList` | 语法   | `public ArrayList<GoodsSortVO> getGoodsSortList(GoodsSortQueryVO query)` |
|                                       | 前置条件 | 正在进行商品分类管理                               |
|                                       | 后置条件 | 根据输入信息返回相应的商品分类                          |
| `GoodsSortBlService.addGoodsSort`     | 语法   | `public ResultMessage addGoodsSort(GoodsSortVO goodsSort)` |
|                                       | 前置条件 | 正在进行商品分类管理                               |
|                                       | 后置条件 | 添加一个商品分类，更新商品分类列表                        |
| `GoodsSortBlService.deleteGoodsSort`  | 语法   | `public ResultMessage deleteGoodsSort(GoodsSortVO goodsSort)` |
|                                       | 前置条件 | 正在进行商品分类管理                               |
|                                       | 后置条件 | 删除一个商品分类，更新商品分类列表                        |
| `GoodsSortBlService.editGoodsSort`    | 语法   | `public ResultMessage editGoodsSort(GoodsSortVO goodsSort)` |
|                                       | 前置条件 | 正在进行商品分类管理                               |
|                                       | 后置条件 | 编辑一个商品分类，更新商品分类列表                        |
| `GoodsSortBlService.getID`            | 语法   | `public String getID()`                  |
|                                       | 前置条件 | 商品分类已添加                                  |
|                                       | 后置条件 | 返回新商品分类ID                                |

| gooossortbl模块需要的服务（需接口）                  |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `GoodsSortDataService.find(GoodsSortQueryPO query)` | 取得持久化对象的列表 |
| `GoodsSortDataService.insert(GoodsSortPO po)` | 添加商品分类     |
| `GoodsSortDataService.delete(GoodsSortPO po)` | 删除商品分类     |
| `GoodsSortDataService.update(GoodsSortPO po)` | 修改单一持久化对象  |
| `GoodsSortDataService.getGoodsSortID()`  | 得到新的商品分类ID |
<br/>
<br/>
<br/>

| goodsbl模块提供的服务（供接口）           |      |                                          |
| ----------------------------- | ---- | ---------------------------------------- |
| `GoodsBlService.getGoodsList` | 语法   | `public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                               | 前置条件 | 正在进行商品管理                                 |
|                               | 后置条件 | 返回商品列表                                   |
| `GoodsBlService.addGoods`     | 语法   | `public ResultMessage addGoods(GoodsVO goods)` |
|                               | 前置条件 | 正在进行商品管理                                 |
|                               | 后置条件 | 添加一个商品，更新商品列表                            |
| `GoodsBlService.editGoods`    | 语法   | `public ResultMessage editGoods(GoodsVO goods)` |
|                               | 前置条件 | 正在进行商品管理                                 |
|                               | 后置条件 | 编辑一个商品，更新商品列表                            |
| `GoodsBlService.deleteGoods`  | 语法   | `public ResultMessage deleteGoods(GoodsVO goods)` |
|                               | 前置条件 | 正在进行商品管理                                 |
|                               | 后置条件 | 删除一个商品，更新商品列表                            |
| `GoodsBlService.getGoodsID`   | 语法   | `public String getGoodsID()`             |
|                               | 前置条件 | 新建商品时                                    |
|                               | 后置条件 | 返回一个新的商品ID                               |

| gooosbl模块需要的服务（需接口）                      |               |
| ---------------------------------------- | ------------- |
| 服务名                                      | 服务            |
| `GoodsDataService.find(GoodsQueryPO query)` | 根据筛选条件d进行查找商品 |
| `GoodsDataService.insert(GoodsPO po)`    | 添加商品          |
| `GoodsDataService.delete(GoodsPO po)`    | 删除商品          |
| `GoodsDataService.update(GoodsPO po)`    | 更改商品信息        |
| `GoodsDataService.getGoodsID()`          | 得到新的商品ID      |
<br/>
<br/>
<br/>

| inventorybl模块提供的服务（供接口）                  |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `InventoryCheckBlService.getImportNumber` | 语法   | `public int getImportNumber(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的入库商品数                        |
| `InventoryCheckBlService.getExportNumber` | 语法   | `public int getExportNumber(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的出库商品数                        |
| `InventoryCheckBlService.getImportAmount` | 语法   | `public double getImportAmount(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的入库商品金额                       |
| `InventoryCheckBlService.getExportAmount` | 语法   | `public double getExportAmount(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的出库商品金额                       |
| `InventoryCheckBlService.getPurchaseNumber` | 语法   | `public int getPurchaseNumber(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的进货商品数                        |
| `InventoryCheckBlService.getPurchaseAmount` | 语法   | `public int getPurchaseAmount(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的进货商金额                        |
| `InventoryCheckBlService.getSaleNumber`  | 语法   | `public double getSaleNumber(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的销售商品数                        |
| `InventoryCheckBlService.getSaleAmount`  | 语法   | `public double getSaleAmount(Date start,Date end)` |
|                                          | 前置条件 | 正在进行库存查看，日期输入正确                          |
|                                          | 后置条件 | 返回对应的在此时间段内的销售商金额                        |
| `InventoryVerificationBlService.getGoodsList` | 语法   | `public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 得到库存数据                                   |
| `InventoryLossOverBillBlService.getID`   | 语法   | `public String getID()`                  |
|                                          | 前置条件 | 得到库存单据数据                                 |
|                                          | 后置条件 | 返回对应单据的ID                                |
| `InventoryLossOverBillBlService.getGoodList` | 语法   |                                          |
|                                          | 前置条件 | 得到库存单据数据                                 |
|                                          | 后置条件 | 返回对应商品列表                                 |
| `InventoryLossOverBillBlService.submit`  | 语法   | `public ResultMessage submit(InventoryLossOverBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `InventoryLossOverBillBlService.saveDraft` | 语法   | `public ResultMessage saveDraft(InventoryLossOverBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 保存单据草稿                                   |
| `InventoryLossOverBillBlService.getInventoryLossOverBillList` | 语法   | `public ArrayList<InventoryLossOverBillVO> getInventoryLossOverBillList(BillQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得进货单列表                                  |
| `InventoryGiftBillBlService.getID`       | 语法   | `public String getID()`                  |
|                                          | 前置条件 | 得到库存单据数据                                 |
|                                          | 后置条件 | 返回对应单据的ID                                |
| `InventoryGiftBillBlService.getGoodList` | 语法   | `public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                                          | 前置条件 | 得到库存单据数据                                 |
|                                          | 后置条件 | 返回对应商品列表                                 |
| `InventoryGiftBillBlService.getClientList` | 语法   | `public ArrayList<ClientVO> getGoodsList(ClientQueryVO query)` |
|                                          | 前置条件 | 得到库存单据数据                                 |
|                                          | 后置条件 | 返回对应商品列表                                 |
| `InventoryGiftBillBlService.submit`      | 语法   | `public ResultMessage submit(InventoryGiftBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `InventoryGiftBillBlService.saveDraft`   | 语法   | `public ResultMessage saveDraft(InventoryGiftBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 保存单据草稿                                   |
|                                          | 前置条件 | 单据审批不通过                                  |
|                                          | 后置条件 | 修改单据状态为不通过                               |
| `InventoryGiftBillBlService.getInventoryGiftBillList` | 语法   | `public ArrayList<InventoryGiftBillVO> getInventoryGiftBillList(BillQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得进货单列表                                  |
<br/>

| inventorybl模块需要的服务（需接口）                  |                 |
| ---------------------------------------- | --------------- |
| 服务名                                      | 服务              |
| `InventoryLossOverBillDataService.find(BillQueryPO query)` | 查找匹配的单一持久化对象    |
| `InventoryLossOverBillDataService.insert(InventoryLossOverBillPO bill)` | 添加单据            |
| `InventoryLossOverBillDataService.update(InventoryLossOverBillPO bill)` | 修改单据            |
| `InventoryGiftBillDataService.find(BillQueryVO query)` | 根据筛选条件返回库存赠送单列表 |
| `InventoryGiftBillDataService.insert(InventoryGiftBillPO bill)` | 添加单据            |
| `InventoryGiftBillDataService.update(InventoryGiftBillPO bill)` | 修改单据            |

<br/>
<br/>
<br/>

| clientbl模块提供的服务（供接口）            |      |                                          |
| ------------------------------- | ---- | ---------------------------------------- |
| `ClientBlService.getClientList` | 语法   | `public ArrayList<ClientVo> getClientList(ClientQueryVO query)` |
|                                 | 前置条件 | 正在进行客户管理                                 |
|                                 | 后置条件 | 返回客户列表                                   |
| `ClientBlService.addClient`     | 语法   | `public ResultMessage addClient(ClientVO client)` |
|                                 | 前置条件 | 正在进行客户管理                                 |
|                                 | 后置条件 | 添加一个客户，更新客户列表                            |
| `ClientBlService.editClient`    | 语法   | `public ResultMessage editClient(ClientVO client)` |
|                                 | 前置条件 | 正在进行客户管理                                 |
|                                 | 后置条件 | 编辑一个客户，更新客户列表                            |
| `ClientBlService.deleteClient`  | 语法   | `public ResultMessage deleteClient(ClientVO client)` |
|                                 | 前置条件 | 正在进行客户管理                                 |
|                                 | 后置条件 | 删除一个客户，更新客户列表                            |
| `ClientBlService.getClientID`   | 语法   | `public String getClientID()`            |
|                                 | 前置条件 | 新建客户时                                    |
|                                 | 后置条件 | 返回一个新的客户ID                               |
<br/>

| clientbl模块需要的服务（需接口）                     |              |
| ---------------------------------------- | ------------ |
| 服务名                                      | 服务           |
| `ClientDataService.find(ClientQueryPO query)` | 根据筛选条件进行查找客户 |
| `ClientDataService.insert(ClientPO po)`  | 添加客户         |
| `ClientDataService.delete(ClientPO po)`  | 删除客户         |
| `ClientDataService.update(ClientPO po)`  | 更改客户信息       |
| `ClientDataService.getID()`              | 得到新的客户ID     |
<br/>
<br/>
<br/>

| purchasebl提供的服务（供接口）                     |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseTradeBillBlService.getID`       | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `PurchaseTradeBillBlService.getSupplierList` | 语法   | `public ArrayList<ClientVO> getSupplierList(ClientQueryVO query)` |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回客户列表                                   |
| `PurchaseTradeBillService.getGoodsList`  | 语法   | `public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回商品列表                                   |
| `PurchaseTradeBillBlService.submit`      | 语法   | `public ResultMessage submit(PurchaseTradeBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `PurchaseTradeBillBlService.saveDraft`   | 语法   | `public ResultMessage saveDraft(PurchaseTradeBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 保存单据草稿                                   |
| `PurchaseTradeBillBlService.getPurchaseTradeBillList` | 语法   | `public ArrayList<PurchaseTradeBillVO> getPurchaseTradeBillList(BillQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得进货单列表                                  |
| `PurchaseRefundBillBlService.getID`      | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定进货退货单                                |
|                                          | 后置条件 | 返回单据ID                                   |
| `PurchaseRefundBillBlService.getSupplierList` | 语法   | `public ArrayList<ClientVO> getSupplierList(ClientQueryVO query)` |
|                                          | 前置条件 | 开始制定进货退货单                                |
|                                          | 后置条件 | 返回客户列表                                   |
| `PurchaseRefundBillService.getGoodsList` | 语法   | `public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                                          | 前置条件 | 开始制定进货退货单                                |
|                                          | 后置条件 | 返回商品列表                                   |
| `PurchaseRefundBillBlService.submit`     | 语法   | `public ResultMessage submit(PurchaseRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `PurchaseRefundBillBlService.saveDraft`  | 语法   | `public ResultMessage saveDraft(PurchaseRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 保存单据草稿                                   |
| `PurchaseRefundBilllService.getPurchaseRefudnBillList` | 语法   | `public ArrayList<PurchaseRefundBillVO> getPurchaseRefundBillList(BillQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得进货退货单列表                                |
<br/>

| purchasebl模块需要的服务（需接口）                   |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `PurchaseTradeBillDataService.find(BillQueryPO query)` | 取得进货单列表   |
| `PurchaseTradeBillDataService.getID()`   | 得到新的进货单ID |
| `PurchaseTradeBillDataService.insert(PurchaseTradeBillPO po)` | 添加进货单     |
| `PurchaseTradeBillDataService.update(PurchaseTradeBillPO po)` | 修改进货单     |
| `PurchaseRefundBillDataService.find(BillQueryPO query)` | 取得进货单列表   |
| `PurchaseRefundBillDataService.getID()`  | 得到新的进货单ID |
| `PurchaseRefundBillDataService.insert(PurchaseRefundBillPO po)` | 添加进货单     |
| `PurchaseRefundBillDataService.update(PurchaseRefundBillPO po)` | 添加进货单     |
<br/>
<br/>
<br/>

| salebl模块提供的服务（供接口）                       |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleTradeBillBlService.getID`           | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `SaleTradeBillBlService.getSellerList`   | 语法   | `public ArrayList<ClientVO> getSellerList(ClientQueryVO query)` |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回客户列表                                   |
| `SaleTradeBillService.getGoodsList`      | 语法   | `public ArrayList<goodsVO> getGoodsList(GoodsQueryVO query)` |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回商品列表                                   |
| `SaleTradeBillService.getSalesmanList`   | 语法   | `public ArrayList<UserVO> getSalesmanList(UserVO query)` |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回业务员列表                                  |
| `SaleTradeBillService.getPromotitonList` | 语法   | `public ArrayList<PromotionVO> getPromotionList(PromotionQueryVO query)` |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回符合的促销策略列表                              |
| `SaleTradeBillBlService.submit`          | 语法   | `public ResultMessage submit(SaleTradeBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `SaleTradeBillBlService.saveDraft`       | 语法   | `public ResultMessage saveDraft(SaleTradeBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 保存单据草稿                                   |
| `SaleTradeBillBlService.getSaleTradeBillList` | 语法   | `public ArrayList<SaleTradeBillVO> getSaleTradeBillList(BillQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得销售单列表                                  |
| `SaleRefundBillBlService.getID`          | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定销售退货单                                |
|                                          | 后置条件 | 返回单据ID                                   |
| `SaleRefundBillBlService.getSellerList`  | 语法   | `public ArrayList<ClientVO> getSellerList(ClientQueryVO query)` |
|                                          | 前置条件 | 开始制定销售退货单                                |
|                                          | 后置条件 | 返回客户列表                                   |
| `SaleRefundBillService.getGoodsList`     | 语法   | `public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                                          | 前置条件 | 开始制定销售退货单                                |
|                                          | 后置条件 | 返回商品列表                                   |
| `SaleRefundBillService.getSalesmanList`  | 语法   | `public ArrayList<UserVO> getSalesmanList(UserVO query)` |
|                                          | 前置条件 | 开始制定销售退货单                                |
|                                          | 后置条件 | 返回业务员列表                                  |
| `SaleRefundBillBlService.submit`         | 语法   | `public ResultMessage submit(SaleRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `SaleRefundBillBlService.saveDraft`      | 语法   | `public ResultMessage saveDraft(SaleRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 保存单据草稿                                   |
| `SaleRefundBilllService.getSaleRefudnBillList` | 语法   | `public ArrayList<SaleRefundBillVO> getSaleRefundBillList(BillQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得销售退货单列表                                |
<br/>

| 需要的服务（需接口）                               |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `SaleTradeBillDataService.find(BillQueryPO query)` | 取得销售单列表   |
| `SaleTradeBillDataService.getID()`       | 得到新的销售单ID |
| `SaleTradeBillDataService.insert(SaleTradeBillPO po)` | 添加销售单     |
| `SaleTradeBillDataService.update(SaleTradeBillPO po)` | 添加销售单     |
| `SaleRefundBillDataService.find(BillQueryPO query)` | 取得销售单列表   |
| `SaleRefundBillDataService.getID()`      | 得到新的销售单ID |
| `SaleRefundBillDataService.insert(SaleRefundBillPO po)` | 添加销售单     |
| `SaleRefundBillDataService.update(SaleRefundBillPO po)` | 更新销售单     |
<br/>
<br/>
<br/>

| loginbl模块提供的服务（供接口）    |      |                                          |
| ---------------------- | ---- | ---------------------------------------- |
| `LoginBlService.login` | 语法   | `public UserVO login(String ID, String password)` |
|                        | 前置条件 | 在登陆界面                                    |
|                        | 后置条件 | 根据用户名和密码返回客户信息                           |
<br/>

| loginbl模块需要的服务（需接口）                      |              |
| ---------------------------------------- | ------------ |
| 服务名                                      | 服务           |
| `LoginDataService.login(String ID,String password)` | 根据用户名和密码取得用户 |
<br/>
<br/>
<br/>

| messagebl模块提供的服务（供接口）             |      |                                          |
| --------------------------------- | ---- | ---------------------------------------- |
| `MessageBlService.getMessageList` | 语法   | `public Arraylist<MessageVO> getMessageList(UserVO receiver)` |
|                                   | 前置条件 | 在各个用户的主界面                                |
|                                   | 后置条件 | 根据接收者，返回系统信息                             |
| `MessageTool.addMessage`          | 语法   | `public ResultMessage addMessage(MessageVO message)` |
|                                   | 前置条件 | 增加给某一用户的信息                               |
|                                   | 后置条件 | 更新持久化数据                                  |
<br/>

| messagebl模块需要的服务（需接口）                    |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `MessageDataService.find(UserPO receiver)` | 取得该用户的系统信息 |
| `MessageDataService.insert(MessagePO message)` | 新增系统消息     |
<br/>
<br/>
<br/>

| accountbl模块提供的服务（供接口）            |      |                                          |
| -------------------------------- | ---- | ---------------------------------------- |
| `AccountBlService.getID`         | 语法   | `public String getID()`                  |
|                                  | 前置条件 | 正在进行账户管理                                 |
|                                  | 后置条件 | 返回账户ID                                   |
| `AccountBlService.addAccount`    | 语法   | `public ResultMessage addAccount(AccountVO account)` |
|                                  | 前置条件 | 正在进行账户管理                                 |
|                                  | 后置条件 | 添加一个账户，更新账户列表                            |
| `AccountBlService.deleteAccount` | 语法   | `public ResultMessage deleteAccount(AccountVO account)` |
|                                  | 前置条件 | 正在进行账户管理                                 |
|                                  | 后置条件 | 删除一个账户，更新账户列表                            |
<br/>

| accountbl模块需要的服务（需接口）                    |              |
| ---------------------------------------- | ------------ |
| 服务名                                      | 服务           |
| `AccountDataService.find(AccountQueryPO query)` | 根据筛选条件进行查找账户 |
| `AccountDataService.getID()`             | 取得账户ID       |
| `AccountDataService.insert(AccountPO po)` | 添加账户         |
| `AccountDataService.delete(AccountPO po)` | 删除账户         |
| `AccountDataService.update(AccountPO po)` | 更改账户信息       |
| `LogTool.addLog(LogVO log)`              | 记录日志         |
<br/>
<br/>
<br/>

| financebl模块提供的服务（供接口）                 |      |                                          |
| ------------------------------------- | ---- | ---------------------------------------- |
| `PaymentBillBlService.getID`          | 语法   | `public String getID()`                  |
|                                       | 前置条件 | 当日单据小于99999条                             |
|                                       | 后置条件 | 返回新的付款单单据编号                              |
| `PaymentBillBlService.getClientList`  | 语法   | `  public ArrayList<ClientVO> getClientList(ClientQueryVO query)` |
|                                       | 前置条件 | 编辑付款单时                                   |
|                                       | 后置条件 | 返回客户列表                                   |
| `PaymentBillBlService.getAccountList` | 语法   | `  public ArrayList<AccountVO> getAccountList(AccountQueryVO query)` |
|                                       | 前置条件 | 编辑付款单时                                   |
|                                       | 后置条件 | 返回账户列表                                   |
| `PaymentBillBlService.submit`         | 语法   | `  public ResultMessage submit(PaymentBillVO vo)` |
|                                       | 前置条件 | 制定单据完成                                   |
|                                       | 后置条件 | 更新并提交付款单，持久化更新涉及的对象的数据                   |
| `PaymentBillBlService.saveDraft`      | 语法   | `  public ResultMessage saveDraft(PaymentBillVO vo)` |
|                                       | 前置条件 | 制定单据完成                                   |
|                                       | 后置条件 | 保存单据草稿                                   |
| `ReceiptBillBlService.getID`          | 语法   | `public String getID()`                  |
|                                       | 前置条件 | 当日单据小于99999条                             |
|                                       | 后置条件 | 返回新的收款单单据编号                              |
| `ReceiptBillBlService.getClientList`  | 语法   | `  public ArrayList<ClientVO> getClientList(ClientQueryVO query)` |
|                                       | 前置条件 | 编辑收款单时                                   |
|                                       | 后置条件 | 返回客户列表                                   |
| `ReceiptBillBlService.getAccountList` | 语法   | `  public ArrayList<AccountVO> getAccountList(AccountQueryVO query)` |
|                                       | 前置条件 | 编辑收款单时                                   |
|                                       | 后置条件 | 返回账户列表                                   |
| `ReceiptBillBlService.submit`         | 语法   | `  public ResultMessage submit(ReceiptBillVO vo)` |
|                                       | 前置条件 | 制定单据完成                                   |
|                                       | 后置条件 | 更新并提交收款单，持久化更新涉及的对象的数据                   |
| `ReceiptBillBlService.saveDraft`      | 语法   | `  public ResultMessage saveDraft(ReceiptBillVO vo)` |
|                                       | 前置条件 | 制定单据完成                                   |
|                                       | 后置条件 | 保存单据草稿                                   |
| `CashBillBlService.getID`             | 语法   | `public String getID()`                  |
|                                       | 前置条件 | 当日单据小于99999条                             |
|                                       | 后置条件 | 返回新的现金费用单单据编号                            |
| `CashBillBlService.getGoodsList`      | 语法   | `  public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                                       | 前置条件 | 编辑现金费用单时                                 |
|                                       | 后置条件 | 返回商品列表                                   |
| `CashBillBlService.getAccountList`    | 语法   | `  public ArrayList<AccountVO> getAccountList(AccountQueryVO query)` |
|                                       | 前置条件 | 编辑现金费用单时                                 |
|                                       | 后置条件 | 返回账户列表                                   |
| `CashBillBlService.submit`            | 语法   | `  public ResultMessage submit(CashBillVO vo)` |
|                                       | 前置条件 | 制定单据完成                                   |
|                                       | 后置条件 | 更新并提交现金费用单，持久化更新涉及的对象的数据                 |
| `CashBillBlService.saveDraft`         | 语法   | `  public ResultMessage saveDraft(CashBillVO vo)` |
|                                       | 前置条件 | 制定单据完成                                   |
|                                       | 后置条件 | 保存单据草稿                                   |
<br/>

| financebl模块需要的服务（需接口）                    |                 |
| ---------------------------------------- | --------------- |
| 服务名                                      | 服务              |
| `PaymentBillDataService.find(BillQueryPO query)` | 根据筛选条件获取付款单列表   |
| `PaymentBillDataService.getID()`         | 得到新的付款单ID       |
| `PaymentBillDataService.insert(PaymentBillPO po)` | 添加付款单           |
| `PaymentBillDataService.update(PaymentBillPO po)` | 更新付款单信息         |
| `ReceiptBillDataService.find(BillQueryPO query)` | 根据筛选条件获取收款单列表   |
| `ReceiptBillDataService.getID()`         | 得到新的收款单ID       |
| `ReceiptBillDataService.insert(ReceiptBillPO po)` | 添加收款单           |
| `ReceiptBillDataService.update(ReceiptBillPO po)` | 更新收款单信息         |
| `CashBillDataService.find(BillQueryPO query)` | 根据筛选条件获取现金费用单列表 |
| `CashBillDataService.getID()`            | 得到新的现金费用单ID     |
| `CashBillDataService.insert(CashBillPO po)` | 添加现金费用单         |
| `CashBillDataService.update(CashBillPO po)` | 更新现金费用单信息       |
| `ClientTool.getClientList(ClientQueryVO query)` | 取得客户列表          |
| `AccountTool.getAccountList(AccountQueryVO query)` | 取得账户列表          |
| `ClientTool.editClient(ClientVO client)` | 更改客户信息          |
| `AccountTool.editAccount(AccountVO account)` | 更改账户信息          |
| `GoodsTool.getGoodsList(GoodsQueryVO query)` | 取得商品列表          |
| `LogTool.addLog(LogVO log)`              | 记录日志            |
<br/>
<br/>
<br/>

| initialbl模块提供的服务（供接口）             |      |                                          |
| --------------------------------- | ---- | ---------------------------------------- |
| `Initial.getYear`                 | 语法   | `public String getYear()`                |
|                                   | 前置条件 | 无                                        |
|                                   | 后置条件 | 返回期初信息列表                                 |
| `InitialBlService.getGoodsList`   | 语法   | `    public ArrayList<GoodsVO> getGoodsList(GoodsQueryVO query)` |
|                                   | 前置条件 | 无                                        |
|                                   | 后置条件 | 返回上一年的持久化商品对象                            |
| `InitialBlService.getClientList`  | 语法   | `    public ArrayList<ClientVO> getClientList(ClientQueryVO query)` |
|                                   | 前置条件 | 无                                        |
|                                   | 后置条件 | 返回上一年的持久化客户对象                            |
| `InitialBlService.getAccountList` | 语法   | `    public ArrayList<AccountVO> getAccountList(AccountQueryVO query)` |
|                                   | 前置条件 | 输入的时间合法                                  |
|                                   | 后置条件 | 返回上一年的持久化账户对象                            |
| `InitialBlService.addInitial`     | 语法   | `public ResultMessage establishInitial(initialVO initial)` |
|                                   | 前置条件 | 输入的商品、客户、账户对象合法                          |
|                                   | 后置条件 | 保存期初信息，持久化更新涉及的对象的数据                     |
| `InitialBlService.getInitialList` | 语法   | `public ArrayList<InitialVO> getInitial(InitialQueryVO query)` |
|                                   | 前置条件 | 无                                        |
|                                   | 后置条件 | 返回期初信息列表                                 |
<br/>

| initialbl模块需要的服务（需接口）                    |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `InitialDataService.insert(InitialPO po)` | 添加期初信息    |
| `InitialDataService.find(InitialQueryPO query)` | 获取持久化对象列表 |
| `ClientTool.getClientList(ClientQueryVO query)` | 取得客户列表    |
| `AccountTool.getAccountList(AccountQueryVO query)` | 取得账户列表    |
| `GoodsTool.getGoodsList(GoodsQueryVO query)` | 取得商品列表    |
| `LogTool.addLog(LogVO log)`              | 记录日志      |
<br/>
<br/>
<br/>

| logbl模块提供的服务（供接口）         |      |                                          |
| ------------------------- | ---- | ---------------------------------------- |
| `LogBlService.getLogList` | 语法   | `public ArrayList<LogVO> getLogList(LogQueryVO query)` |
|                           | 前置条件 | 无                                        |
|                           | 后置条件 | 无                                        |
<br/>

| logbl模块需要的服务（需接口）                       |               |
| --------------------------------------- | ------------- |
| 服务名                                     | 服务            |
| `LogDataService.find(LogQueryPO query)` | 根据筛选条件查找符合的日志 |
| `LogDataService.insert(LogPO po)`       | 插入日志          |
| `LogDataService.update(LogPO po)`       | 更新日志          |

<br/>
<br/>
<br/>

| reportbl提供的服务（供接口）                       |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaLeDetailBlService.getSaleRecordList`  | 语法   | `public ArrayList<SaleRecord> getSaleRecordList(SaleDetailQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 系统返回符合筛选条件的所有商品销售记录                      |
| `BusinessHistoryBlService.getBillList`   | 语法   | `public ArrayList<BillVO> getBillList(BusinessHistoryQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 系统返回符合筛选条件的所有单据                          |
| `BusinessConditionBlService.getCondition` | 语法   | `public ArrayList<Double> getCondition(BusinessConditionQueryVO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 系统返回符合筛选条件的经营情况                          |


<br/>

| reportbl需要的服务（需接口）                       |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `SaleTradeBillTool.getSaleTradeBillList(SaleTradeBillQueryVO query)` | 返回销售单列表   |
| `PurchaseTradeBillTool.getPurchaseTradeBillList(PurchaseTradeBillQueryVO query)` | 返回进货单列表   |
| `PurchseRefundBillTool.getPurchseRefundBillList(PurchaseRefundBillQueryVO query)` | 返回进货退货单列表 |
| `SaleTradeBillTool.getSaleTradeBillList(SaleTradeBillQueryVO query)` | 返回销售单列表   |
| `SaleRefundBillTool.getSaleRefundBilList(SaleRefundBillQueryVO query)` | 返回销售退货单列表 |
| `PaymentBillTool.getPaymentBillList(PaymentBillQueryVO query)` | 返回付款单列表   |
| `ReceiptBillTool.getReceiptBillList(ReceiptBillQueryVO query)` | 返回收款单列表   |
| `CashBillTool.getCashBillList(CashBillQueryVO query)` | 返回现金费用单列表 |
| `InventoryLossOverBillTool.getInventoryLossOverBillList(InventoryLossOverBillQueryVO query)` | 返回库存溢损单列表 |
| `InventoryGiftBillTool.getInventoryGiftBillList(InventoryGiftBillQueryVO query)` | 返回库存赠送单列表 |

<br/>
<br/>
<br/>

| approvalbl提供的服务（供接口）            |      |                                          |
| ------------------------------- | ---- | ---------------------------------------- |
| `ApprovalBlService.getBillList` | 语法   | `public ArrayList<BillVO> getBillList(BillQueryVO query)` |
|                                 | 前置条件 | 无                                        |
|                                 | 后置条件 | 系统显示该类型的提交单据                             |
| `ApprovalBlService.pass`        | 语法   | `public ResultMessage pass(ArrayList<BillVO> vo)` |
|                                 | 前置条件 | vo属性正确                                   |
|                                 | 后置条件 | 系统修改单据的数据，状态以及单据涉及的数据                    |
| `ApprovalBlService.reject`      | 语法   | `public ResultMessage reject(ArrayList<BillVO> vo)` |
|                                 | 前置条件 | 无                                        |
|                                 | 后置条件 | 系统修改单据的状态                                |
<br/>
| approvalbl需要的服务（需接口）                     |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `PurchaseTradeBillTool.getPurchaseTradeBillList(PurchaseTradeBillQueryVO query)` | 返回进货单列表    |
| `PurchseRefundBillTool.getPurchseRefundBillList(PurchaseRefundBillQueryVO query)` | 返回进货退货单列表  |
| `SaleTradeBillTool.getSaleTradeBillList(SaleTradeBillQueryVO query)` | 返回销售单列表    |
| `SaleRefundBillTool.getSaleRefundBilList(SaleRefundBillQueryVO query)` | 返回销售退货单列表  |
| `CashBillTool.getCashBillList(CashBillQueryVO query)` | 返回现金费用单列表  |
| `InventoryLossOverBillTool.getInventoryLossOverBillList(InventoryLossOverBillQueryVO query)` | 返回库存溢损单列表  |
| `InventoryGiftBillTool.getInventoryGiftBillList(InventoryGiftBillQueryVO query)` | 返回库存赠送单列表  |
| `PurchaseTradeBillTool.pass(PurchaseTradeBillVO vo)` | 进货单审批通过    |
| `PurchseRefundBillTool.pass(PurchaseRefundBillVO vo)` | 进货退货单审批通过  |
| `SaleTradeBillTool.pass(SaleTradeBillVO vo)` | 销售单审批通过    |
| `SaleRefundBillTool.pass(SaleRefundBillVO vo)` | 销售退货单审批通过  |
| `PaymentBillTool.pass(PaymentBillVO vo)` | 付款单审批通过    |
| `ReceiptBillTool.pass(ReceiptBillVO vo)` | 收款单审批通过    |
| `CashBillTool.pass(CashBillVO vo)`       | 现金费用单审批通过  |
| `InventoryLossOverBillTool.pass(InventoryLossOverBillVO vo)` | 库存溢损单审批通过  |
| `InventoryGiftBillTool.pass(InventoryGiftBillVO vo)` | 库存赠送单审批通过  |
| `PurchaseTradeBillTool.reject(PurchaseTradeBillVO vo)` | 进货单审批不通过   |
| `PurchseRefundBillTool.reject(PurchaseRefundBillVO vo)` | 进货退货单审批不通过 |
| `SaleTradeBillTool.reject(SaleTradeBillVO vo)` | 销售单审批不通过   |
| `SaleRefundBillTool.reject(SaleRefundBillVO vo)` | 销售退货单审批不通过 |
| `PaymentBillTool.reject(PaymentBillVO vo)` | 付款单审批不通过   |
| `ReceiptBillTool.reject(ReceiptBillVO vo)` | 收款单审批不通过   |
| `CashBillTool.reject(CashBillVO vo)`     | 现金费用单审批不通过 |
| `InventoryLossOverBillTool.reject(InventoryLossOverBillVO vo)` | 库存溢损单审批不通过 |
| `InventoryGiftBillTool.reject(InventoryGiftBillVO vo)` | 库存赠送单审批不通过 |
| `LogTool.addLog(LogVO log)`              | 记录日志       |
| `MessageTool.addMessage(MessageVO message)` | 添加系统信息     |

<br/>
<br/>
<br/>

| promotionbl提供的服务（供接口）                 |      |                                          |
| ------------------------------------- | ---- | ---------------------------------------- |
| `PromotionBlService.getPromotionList` | 语法   | `public ArrayList<PromotionVO> getPromotionList(PromotionQueryVO query)` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 系统显示符合条件的促销策略                            |
| `PromotionBlService.addPromotion`     | 语法   | `public ResultMessage addPromotion(PromotionVO vo)` |
|                                       | 前置条件 | vo属性正确                                   |
|                                       | 后置条件 | 系统新增促销策略                                 |
| `PromotionBlService.editPromotion`    | 语法   | `public ResultMessage editPromotion(PromotionVO vo)` |
|                                       | 前置条件 | vo属性正确                                   |
|                                       | 后置条件 | 系统修改促销策略                                 |
| `PromotionBlService.deletePromotion`  | 语法   | `public ResultMessage deletePromotion(PromotionVO vo)` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 系统删除促销策略                                 |
| `PromotionBlService.getID`            | 语法   | `public String getID()`                  |
|                                       | 前置条件 | 新建促销策略                                   |
|                                       | 后置条件 | 返回新促销策略的编号                               |

<br/>

| promotionbl需要的服务（需接口）                    |              |
| ---------------------------------------- | ------------ |
| 服务名                                      | 服务           |
| `PromotionDataService.find(PromotionQueryPO query)` | 根据筛选条件查找促销策略 |
| `PromotionDataService.insert(PromotionPO po)` | 插入单一持久化对象    |
| `PromotionDataService.delete(PromotionPO po)` | 删除单一持久化对象    |
| `PromotionDataService.update(PromotionPO po)` | 更新单一持久化对象    |
| `PromotionDataService.getPrmotionID()`   | 得到新的促销策略ID   |
| `LogTool.addLog(LogVO log)`              | 记录日志         |
| `MessageTool.addMessage(MessageVO message)` | 添加系统信息       |

<br/>
<br/>
<br/>

| userbl提供的服务（供接口）            |      |                                          |
| --------------------------- | ---- | ---------------------------------------- |
| `UserBlService.getUserList` | 语法   | `public ArrayList<UserVo> getUserList(UserQueryVO query)` |
|                             | 前置条件 | 无                                        |
|                             | 后置条件 | 返回用户列表                                   |
| `UserBlService.addUser`     | 语法   | `public ResultMessage addUser(UserVO user)` |
|                             | 前置条件 | 无                                        |
|                             | 后置条件 | 添加一个用户，更新用户列表                            |
| `UserBlService.editUser`    | 语法   | `public ResultMessage editUser(UserVO user)` |
|                             | 前置条件 | 无                                        |
|                             | 后置条件 | 编辑一个用户，更新用户列表                            |
| `UserBlService.deleteUser`  | 语法   | `public ResultMessage deleteUser(UserVO user)` |
|                             | 前置条件 | 无                                        |
|                             | 后置条件 | 删除一个用户，更新用户列表                            |
| `UserBlService.getUserID`   | 语法   | `public String getUserID()`              |
|                             | 前置条件 | 新建用户                                     |
|                             | 后置条件 | 返回一个新的用户ID                               |

<br/>

| 需要的服务（需接口）                               |              |
| ---------------------------------------- | ------------ |
| 服务名                                      | 服务           |
| `UserDataService.find(UserQueryPO query)` | 根据筛选条件进行查找用户 |
| `UserDataService.insert(UserPO po)`      | 添加用户         |
| `UserDataService.delete(UserPO po)`      | 删除用户         |
| `UserDataService.update(UserPO po)`      | 更改用户信息       |
| `UserDataService.getUserID()`            | 得到新的用户ID     |
| `LogTool.addLog(LogVO log)`              | 记录日志         |
| `MessageTool.addMessage(MessageVO message)` | 添加系统信息       |

<br/>
<br/>
**********************
<br/>
<br/>

## 5.4 数据层的分解
数据层主要给业务逻辑层提供数据访问服务，包括对于持久化数据的增、删、改、查。持久化数据保存采用序列化文件

### 5.4.1 数据层模块的职责
数据层模块职责如下表所示

| 数据层模块                | 职责                             |
| -------------------- | ------------------------------ |
| goodssortdataserver  | 提供商品分类数据集体载入、保存、增删改查服务         |
| goodsdataserver      | 提供商品集体载入、保存、增删改查服务             |
| inventorydataservice | 提供库存单据的提交服务（赠送单、报溢单、报损单、报警单）   |
| clientdataservice    | 提供客户数据集体载入、保存、增删改查服务           |
| purchasedataservice  | 提供进货(退货)单数据集体载入、保存、增加、删除、查找、修改 |
| saledataservice      | 提供销售（退货）单数据集体载入、保存、增加、删除、查找    |
| accountdataservice   | 提供账户数据集体载入、保存、增删改查服务           |
| financedataservice   | 收款单、付款单、现金单的集体载入、保存、查看修改操作     |
| initialdataservice   | 提供期初建账数据集体载入、保存、增加、查看服务        |
| promotiondataservice | 提供促销策略的制定和管理                   |
| userdataservice      | 提供用户集体载入、保存、增删改查服务             |
| logdataservice       | 提供日志集体载入、保存、添加、查看服务            |
| logindataservice     | 提供登陆服务                         |
| messagedataservice   | 提供系统信息服务                       |
<br/>

### 5.4.2 数据层模块的接口规范
数据层模块的接口规范如下表所示
| goodssortdata模块提供的服务（供接口）             |      |                                          |
| ------------------------------------- | ---- | ---------------------------------------- |
| `GoodsSortDataService.find`           | 语法   | `public GoodsSortPO find(GoodsSortQueryPO query)` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 根据筛选条件进行查找商品分类                           |
| `GoodsSortDataService.insert`         | 语法   | `public ResultMessage insert(GoodsSortPO po)` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 添加新商品分类，返回提示信息                           |
| `GoodsSortDataService.delete`         | 语法   | `public ResultMessage delete(GoodsSortPO po)` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 删除商品分类，返回提示信息                            |
| `GoodsSortDataService.update`         | 语法   | `public ResultMessage update(GoodsSortPO po)` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 更新商品分类信息，返回提示信息                          |
| `GoodsSortDataService.getGoodsSortID` | 语法   | `public String getGoodsSortID()`         |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 返回新的商品分类ID                               |
<br/>
<br/>
<br/>

| goodsdata模块提供的服务（供接口）         |      |                                          |
| ----------------------------- | ---- | ---------------------------------------- |
| `GoodsDataService.find`       | 语法   | `public GoodsPO find(GoodsQueryPO query)` |
|                               | 前置条件 | 无                                        |
|                               | 后置条件 | 根据筛选条件进行查找商品                             |
| `GoodsDataService.insert`     | 语法   | `public ResultMessage insert(GoodsPO po)` |
|                               | 前置条件 | 无                                        |
|                               | 后置条件 | 添加新商品，返回提示信息                             |
| `GoodsDataService.delete`     | 语法   | `public ResultMessage delete(GoodsPO po)` |
|                               | 前置条件 | 无                                        |
|                               | 后置条件 | 删除商品，返回提示信息                              |
| `GoodsDataService.update`     | 语法   | `public ResultMessage update(GoodsPO po)` |
|                               | 前置条件 | 无                                        |
|                               | 后置条件 | 更新商品信息，返回提示信息                            |
| `GoodsDataService.getGoodsID` | 语法   | `public String getGoodsID()`             |
|                               | 前置条件 | 无                                        |
|                               | 后置条件 | 返回新的商品ID                                 |
<br/>
<br/>
<br/>

| inventorydata模块提供的服务（供接口）                |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| 服务名                                      | 服务   |                                          |
| `InventoryLossOverBillDataService.find`  | 语法   | `public ArrayList<InventoryLossOverBillPO> find(BillQueryPO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得溢损单列表                                  |
| `InventoryLossOverBillDataService.getID` | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `InventoryLossOverBillDataService.insert` | 语法   | `public ResultMessage insert(InventoryLossOverBillPO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 添加持久化溢损单数据                               |
| `InventoryLossOverBillDataService.update` | 语法   | `public ResultMessage update(InventoryLossOverBillPO bill)` |
|                                          | 前置条件 | 修改单据完成                                   |
|                                          | 后置条件 | 更新持久化溢损单数据                               |
| `InventoryGiftBillDataService.find`      | 语法   | `public ArrayList<InventoryGiftBillPO> find(BillQueryPO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得赠送单列表                                  |
| `InventoryGiftBillDataService.getID`     | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `InventoryGiftBillDataService.insert`    | 语法   | `public ResultMessage insert(InventoryGiftBillPO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 添加持久化赠送单数据                               |
| `InventoryGiftBillDataService.update`    | 语法   | `public ResultMessage update(InventoryGiftBillPO bill)` |
|                                          | 前置条件 | 修改单据完成                                   |
|                                          | 后置条件 | 更新持久化赠送单数据                               |
<br/>
<br/>
<br/>


| clientdata模块提供的服务（供接口）                   |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `ClientDataService.find(ClientQueryPO query)` | 语法   | `public ClientPO find(ClientQueryPO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据筛选条件进行查找客户                             |
| `ClientDataService.insert(ClientPO po)`  | 语法   | `public ResultMessage insert(ClientPO po)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 添加新客户，返回提示信息                             |
| `ClientDataService.delete(ClientPO po)`  | 语法   | `public ResultMessage delete(ClientPO po)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 删除客户，返回提示信息                              |
| `ClientDataService.update(ClientPO po)`  | 语法   | `public ResultMessage update(ClientPO po)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 更新客户信息，返回提示信息                            |
| `ClientDataService.getID()`              | 语法   | `public String getID()`                  |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 返回新的客户ID                                 |
<br/>
<br/>
<br/>

| purchasedata模块提供的服务（供接口）                 |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| 服务名                                      | 服务   |                                          |
| `PurchaseTradeBillDataService.find(BillQueryPO query)` | 语法   | `public ArrayList<PurchaseTradeBillPO> find(BillQueryPO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得进货单列表                                  |
| `PurchaseTradeBillDataService.getID()`   | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `PurchaseTradeBillDataService.insert(PurchaseTradeBillPO po)` | 语法   | `public ResultMessage insert(PurchaseTradeBillPO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 添加持久化进货单数据                               |
| `PurchaseTradeBillDataService.update(PurchaseTradeBillPO po)` | 语法   | `public ResultMessage update(PurchaseTradeBillPO bill)` |
|                                          | 前置条件 | 修改单据完成                                   |
|                                          | 后置条件 | 更新持久化进货单数据                               |
| `PurchaseRefundBillDataService.find(BillQueryPO query)` | 语法   | `public ArrayList<PurchaseRefundBillPO> find(BillQueryPO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得进货退货单列表                                |
| `PurchaseRefundBillDataService.getID()`  | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定进货退货单                                |
|                                          | 后置条件 | 返回单据ID                                   |
| `PurchaseRefundBillDataService.insert(PurchaseRefundBillPO po)` | 语法   | `public ResultMessage insert(PurchaseRefundBillPO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 添加持久化进货退货单数据                             |
| `PurchaseRefundBillDataService.update(PurchaseRefundBillPO po)` | 语法   | `public ResultMessage update(PurchaseRefundBillPO bill)` |
|                                          | 前置条件 | 修改单据完成                                   |
|                                          | 后置条件 | 更新持久化进货退货单数据                             |
<br/>
<br/>
<br/>

| saledata模块提供的服务（供接口）                     |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| 服务名                                      | 服务   |                                          |
| `SaleTradeBillDataService.find(BillQueryPO query)` | 语法   | `public ArrayList<SaleTradeBillPO> find(BillQueryPO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得销售单列表                                  |
| `SaleTradeBillDataService.getID()`       | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `SaleTradeBillDataService.insert(SaleTradeBillPO po)` | 语法   | `public ResultMessage insert(SaleTradeBillPO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 添加持久化销售单数据                               |
| `SaleTradeBillDataService.update(SaleTradeBillPO po)` | 语法   | `public ResultMessage update(SaleTradeBillPO bill)` |
|                                          | 前置条件 | 修改单据完成                                   |
|                                          | 后置条件 | 更新持久化销售单数据                               |
| `SaleRefundBillDataService.find(BillQueryPO query)` | 语法   | `public ArrayList<SaleRefundBillPO> find(BillQueryPO query)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 取得销售退货单列表                                |
| `SaleRefundBillDataService.getID()`      | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定销售退货单                                |
|                                          | 后置条件 | 返回单据ID                                   |
| `SaleRefundBillDataService.insert(SaleRefundBillPO po)` | 语法   | `public ResultMessage insert(SaleRefundBillPO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 添加持久化销售退货单数据                             |
| `SaleRefundBillDataService.update(SaleRefundBillPO po)` | 语法   | `public ResultMessage update(SaleRefundBillPO bill)` |
|                                          | 前置条件 | 修改单据完成                                   |
|                                          | 后置条件 | 更新持久化销售退货单数据                             |
<br/>
<br/>
<br/>

| logindata模块提供的服务（供接口）    |      |                                          |
| ------------------------ | ---- | ---------------------------------------- |
| `LoginDataService.login` | 语法   | `public UserPO login(String ID, String password)` |
|                          | 前置条件 | 无                                        |
|                          | 后置条件 | 根据用户名和密码返回客户信息                           |
<br/>
<br/>
<br/>

| messagedata模块提供的服务（供接口）     |                                          |      |
| --------------------------- | ---------------------------------------- | ---- |
| `MessageDataService.find`   | `public Arraylist<MessagePO> find(UserPO receiver)` | 语法   |
|                             | 无                                        | 前置条件 |
|                             | 根据接收者，返回系统信息                             | 后置条件 |
| `MessageDataService.insert` | `public ResultMessage insert(MessagePO message)` | 语法   |
|                             | 增加给某一用户的信息                               | 前置条件 |
|                             | 更新持久化数据                                  | 后置条件 |
<br/>
<br/>
<br/>

| accountdataservice模块提供的服务（供接口）    |      |                                          |
| --------------------------------- | ---- | ---------------------------------------- |
| `AccountDataService.rightControl` | 语法   | `public String rightControl(UserPO po) throws RemoteException` |
|                                   | 前置条件 | 无                                        |
|                                   | 后置条件 | 查找返回用户是否最高权限                             |
| `AccountDataService.find`         | 语法   | `public AccountPO find(String accountID) throws RemoteException` |
|                                   | 前置条件 | 持久化数据中存在账户id                             |
|                                   | 后置条件 | 根据账户ID查找并返回相应的AccountPO                  |
| `AccountDataService.insert`       | 语法   | `public void insert(AccountPO po) throws RemoteException` |
|                                   | 前置条件 | 同样ID的po在Mapper中不存在                       |
|                                   | 后置条件 | 在持久化数据中插入一个po记录                          |
| `AccountDataService.delete`       | 语法   | `public void delete(AccountPO po) throws RemoteException` |
|                                   | 前置条件 | 持久化数据中存在同样ID的po                          |
|                                   | 后置条件 | 删除一个po                                   |
| `AccountDataService.update`       | 语法   | `public void update(AccountPO po) throws RemoteException` |
|                                   | 前置条件 | 持久化数据中存在同样ID的po                          |
|                                   | 后置条件 | 更新一个po                                   |
| `AccountDataService.init`         | 语法   | `public void init() throws RemoteException` |
|                                   | 前置条件 | 无                                        |
|                                   | 后置条件 | 初始化持久化数据库                                |
| `AccountDataService.finish`       | 语法   | `public void finish() throws RemoteException` |
|                                   | 前置条件 | 无                                        |
|                                   | 后置条件 | 结束持久化数据库                                 |
<br/>
<br/>
<br/>

| financedataservice模块提供的服务（供接口）     |      |                                          |
| ---------------------------------- | ---- | ---------------------------------------- |
| `PaymentBillDataService.submitDoc` | 语法   | `public void submitDoc(PaymentBillPO po) throws RemoteException` |
|                                    | 前置条件 | 提交的单据有效                                  |
|                                    | 后置条件 | 上传一个po                                   |
| `PaymentBillDataService.saveDoc`   | 语法   | `public void saveDoc(PaymentBillPO po) throws RemoteException` |
|                                    | 前置条件 | 保存的单据有效                                  |
|                                    | 后置条件 | 保存一个po                                   |
| `PaymentBillDataService.find`      | 语法   | `public PaymentBillPO find(String docID) throws RemoteException` |
|                                    | 前置条件 | 持久化数据中存在付款单id                            |
|                                    | 后置条件 | 根据付款单ID查找并返回相应的PaymentBillPO结果           |
| `PaymentBillDataService.insert`    | 语法   | `public void insert(PaymentBillPO po) throws RemoteException` |
|                                    | 前置条件 | 同样ID的po在Mapper中不存在                       |
|                                    | 后置条件 | 在持久化数据中插入一个po记录                          |
| `PaymentBillDataService.update`    | 语法   | `public void update(PaymentBillPO po) throws RemoteException` |
|                                    | 前置条件 | 持久化数据中存在同样ID的po                          |
|                                    | 后置条件 | 更新一个po                                   |
| `PaymentBillDataService.init`      | 语法   | `public void init() throws RemoteException` |
|                                    | 前置条件 | 无                                        |
|                                    | 后置条件 | 初始化持久化数据库                                |
| `PaymentBillDataService.finish`    | 语法   | `public void finish() throws RemoteException` |
|                                    | 前置条件 | 无                                        |
|                                    | 后置条件 | 结束持久化数据库                                 |
| `ReceiptBillDataService.submitDoc` | 语法   | `public void submitDoc(ReceiptBillPO po) throws RemoteException` |
|                                    | 前置条件 | 提交的单据有效                                  |
|                                    | 后置条件 | 上传一个po                                   |
| `ReceiptBillDataService.saveDoc`   | 语法   | `public void saveDoc(ReceiptBillPO po) throws RemoteException` |
|                                    | 前置条件 | 保存的单据有效                                  |
|                                    | 后置条件 | 保存一个po                                   |
| `ReceiptBillDataService.find`      | 语法   | `public ReceiptBillPO find(String docID) throws RemoteException` |
|                                    | 前置条件 | 持久化数据中存在收款单id                            |
|                                    | 后置条件 | 根据收款单ID查找并返回相应的ReceiptBillPO结果           |
| `ReceiptBillDataService.insert`    | 语法   | `public void insert(ReceiptBillPO po) throws RemoteException` |
|                                    | 前置条件 | 同样ID的po在Mapper中不存在                       |
|                                    | 后置条件 | 在持久化数据中插入一个po记录                          |
| `ReceiptBillDataService.update`    | 语法   | `public void update(ReceiptBillPO po) throws RemoteException` |
|                                    | 前置条件 | 持久化数据中存在同样ID的po                          |
|                                    | 后置条件 | 更新一个po                                   |
| `ReceiptBillDataService.init`      | 语法   | `public void init() throws RemoteException` |
|                                    | 前置条件 | 无                                        |
|                                    | 后置条件 | 初始化持久化数据库                                |
| `ReceiptBillDataService.finish`    | 语法   | `public void finish() throws RemoteException` |
|                                    | 前置条件 | 无                                        |
|                                    | 后置条件 | 结束持久化数据库                                 |
| `CashBillDataService.submitDoc`    | 语法   | `public void submitDoc(CashBillPO po) throws RemoteException` |
|                                    | 前置条件 | 提交的单据有效                                  |
|                                    | 后置条件 | 上传一个po                                   |
| `CashBillDataService.saveDoc`      | 语法   | `public void saveDoc(CashBillPO po) throws RemoteException` |
|                                    | 前置条件 | 保存的单据有效                                  |
|                                    | 后置条件 | 保存一个po                                   |
| `CashBillDataService.find`         | 语法   | `public CashBillPO find(String docID) throws RemoteException` |
|                                    | 前置条件 | 持久化数据中存在现金费用款单id                         |
|                                    | 后置条件 | 根据现金费用单ID查找并返回相应的CashBillPO结果            |
| `CashBillDataService.insert`       | 语法   | `public void insert(CashBillPO po) throws RemoteException` |
|                                    | 前置条件 | 同样ID的po在Mapper中不存在                       |
|                                    | 后置条件 | 在持久化数据中插入一个po记录                          |
| `CashBillDataService.update`       | 语法   | `public void update(CashBillPO po) throws RemoteException` |
|                                    | 前置条件 | 持久化数据中存在同样ID的po                          |
|                                    | 后置条件 | 更新一个po                                   |
| `CashBillDataService.init`         | 语法   | `public void init() throws RemoteException` |
|                                    | 前置条件 | 无                                        |
|                                    | 后置条件 | 初始化持久化数据库                                |
| `CashBillDataService.finish`       | 语法   | `public void finish() throws RemoteException` |
|                                    | 前置条件 | 无                                        |
|                                    | 后置条件 | 结束持久化数据库                                 |
<br/>
<br/>
<br/>

| initialdataservice模块提供的服务（供接口） |      |                                          |
| ------------------------------ | ---- | ---------------------------------------- |
| `InitialDataService.find`      | 语法   | `public InitialPO find(int year) throws RemoteException` |
|                                | 前置条件 | 持久化数据中存在期初建账年份year                       |
|                                | 后置条件 | 根据年份year查找并返回相应的InitialPO结果              |
| `InitialDataService.insert`    | 语法   | `public void insert(InitialPO po) throws RemoteException` |
|                                | 前置条件 | 同样年份的po在Mapper中不存在                       |
|                                | 后置条件 | 在持久化数据中插入一个po记录                          |
| `InitialDataService.delete`    | 语法   | `public void delete(InitialPO po) throws RemoteException` |
|                                | 前置条件 | 持久化数据中存在同样年份的po                          |
|                                | 后置条件 | 删除一个po                                   |
| `InitialDataService.update`    | 语法   | `public void update(InitialPO po) throws RemoteException` |
|                                | 前置条件 | 持久化数据中存在同样ID的po                          |
|                                | 后置条件 | 更新一个po                                   |
| `InitialDataService.init`      | 语法   | `public void init() throws RemoteException` |
|                                | 前置条件 | 无                                        |
|                                | 后置条件 | 初始化持久化数据库                                |
| `InitialDataService.finish`    | 语法   | `public void finish() throws RemoteException` |
|                                | 前置条件 | 无                                        |
|                                | 后置条件 | 结束持久化数据库                                 |
<br/>
<br/>
<br/>

| logdataservice模块提供的服务（供接口） |      |                                          |
| -------------------------- | ---- | ---------------------------------------- |
| `LogDataService.find`      | 语法   | `public LogPO find(int year) throws RemoteException` |
|                            | 前置条件 | 持久化数据中存在期初建账年份year                       |
|                            | 后置条件 | 根据年份year查找并返回相应的LogPO结果                  |
| `LogDataService.insert`    | 语法   | `public void insert(LogPO po) throws RemoteException` |
|                            | 前置条件 | 同样年份的po在Mapper中不存在                       |
|                            | 后置条件 | 在持久化数据中插入一个po记录                          |
| `LogDataService.delete`    | 语法   | `public void delete(LogPO po) throws RemoteException` |
|                            | 前置条件 | 持久化数据中存在同样年份的po                          |
|                            | 后置条件 | 删除一个po                                   |
| `LogDataService.update`    | 语法   | `public void update(LogPO po) throws RemoteException` |
|                            | 前置条件 | 持久化数据中存在同样ID的po                          |
|                            | 后置条件 | 更新一个po                                   |
| `LogDataService.init`      | 语法   | `public void init() throws RemoteException` |
|                            | 前置条件 | 无                                        |
|                            | 后置条件 | 初始化持久化数据库                                |
| `LogDataService.finish`    | 语法   | `public void finish() throws RemoteException` |
|                            | 前置条件 | 无                                        |
|                            | 后置条件 | 结束持久化数据库                                 |
<br/>
<br/>
<br/>

| promotiondata提供的服务（供接口）               |      |                                          |
| ------------------------------------- | ---- | ---------------------------------------- |
| `PromotionDataService.find`           | 语法   | `public ArrayList<PromotionPO> find(PromotionQueryPO query) throws RemoteException` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 查找返回符合筛选条件的 `ArrayList<PromotionPO>`结果   |
| `PromotionDataService.insert`         | 语法   | `public void insert(PromotionPO po) throws RemoteException` |
|                                       | 前置条件 | 同样ID的po不存在                               |
|                                       | 后置条件 | 在数据库中增加一个po                              |
| `PromotionDataService.update`         | 语法   | `public void update(PromotionPO po) throws RemoteException` |
|                                       | 前置条件 | 在数据库中存在同样ID的po                           |
|                                       | 后置条件 | 更新一个po                                   |
| `PromotionDataService.delete`         | 语法   | `public void delete(PromotionPO po) throws RemoteException` |
|                                       | 前置条件 | 在数据库中存在同样ID的po                           |
|                                       | 后置条件 | 删除一个po                                   |
| `PromotionDataService.getPromotionID` | 语法   | `public String getPromotionID() throws RemoteException` |
|                                       | 前置条件 | 无                                        |
|                                       | 后置条件 | 返回新建促销策略的ID                              |

<br/>
<br/>
<br/>

| userdata提供的服务（供接口）          |      |                                          |
| --------------------------- | ---- | ---------------------------------------- |
| `UserDataService.find`      | 语法   | `public ArrayList<UserPO> find(UserQueryVO query) throws RemoteException` |
|                             | 前置条件 | 无                                        |
|                             | 后置条件 | 查找返回筛选条件的 `ArrayList<UserPO>`结果          |
| `UserDataService.insert`    | 语法   | `public void insert(UserPO po) throws RemoteException` |
|                             | 前置条件 | 同样ID的po不存在                               |
|                             | 后置条件 | 在数据库中增加一个po                              |
| `UserDataService.update`    | 语法   | `public void update(UserPO po) throws RemoteException` |
|                             | 前置条件 | 在数据库中存在同样ID的po                           |
|                             | 后置条件 | 更新一个po                                   |
| `UserDataService.delete`    | 语法   | `public void delete(UserPO po) throws RemoteException` |
|                             | 前置条件 | 在数据库中存在同样ID的po                           |
|                             | 后置条件 | 删除一个po                                   |
| `UserDataService.getUserID` | 语法   | `public String getUserID() throws RemoteException` |
|                             | 前置条件 | 无                                        |
|                             | 后置条件 | 返回新建帐号的ID                                |

<br/>
<br/>
***********************************************
<br/>
<br/>

# 6.信息视角
## 6.1 数据持久化对象
系统的PO类就是对应的相关的实体类，如下所示: <br/>
·GoodsSortPO商品分类类：编号、名称、父分类、子分类、商品列表。
·GoodsPO商品类：包括编号、名称、型号、数量、进价、零售价、最近进价、最近零售价、报警数量、备注。<br/>
·InventoryAlarmBillPO库存报警单类：包括时间、单据ID、状态、仓库、客户、报警商品列表（包括商品编号、数量）。<br/>
·InventoryOverLossBillPO库存溢损单类：包括时间、单据ID、状态、仓库、操作员、溢损商品列表（包括商品编号、实际数量）。<br/>
·InventoryGiftBillPO库存报警单类：包括时间、单据ID、状态、仓库、客户、赠品列表（包括商品编号、数量）。<br/>
·ClientPO客户类：包括编号、类别（进货商、销售商）、等级（五级，一级普通用户，五级VIP客户）、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员。<br/>
·PurchaseTradeBillPO进货单类：包括时间、状态、单据编号（JHD-yyyyMMdd-xxxxx），客户，仓库，操作员，商品列表，备注，总额。<br/>
·PurchaseRefundBillPO进货退货单类：包括时间、状态、单据编号（JHD-yyyyMMdd-xxxxx），客户，仓库，操作员，商品列表，备注，总额。<br/>
·SaleTradeBillPO销售单类：包括时间、状态、单据编号（XSD-yyyyMMdd-xxxxx），客户，业务员，操作员（当前登录系统的用户），仓库，商品列表，折让前总额，折让，使用代金卷金额，折让后总额，备注。<br/>
·SaleRefundBillPO销售单类：包括时间、状态、单据编号（XSTHD-yyyyMMdd-xxxxx），客户，业务员，操作员（当前登录系统的用户），仓库，商品列表，总额，备注。<br/>
·AccountPO账户类：包括银行账户、账户名称、金额、可见性。<br/>
·ReceiptBillPO收款单类：包括时间、状态，单据编号（SKD-yyyyMMdd-xxxxx），客户（同时包含供应商和销售商），操作员（当前登录用户），转账列表，总额，备注。<br/>
·PaymentBillPO收款单类：包括时间、状态，单据编号（SKD-yyyyMMdd-xxxxx），客户（同时包含供应商和销售商），操作员（当前登录用户），转账列表，总额，备注。<br/>
·CashBillPO现金费用单类：包括时间、状态、单据编号、操作员、备注、条目清单（包括条目名和金额）、总额。<br/>
·InitialPO期初建账类：包括年份、商品信息（商品分类，某一商品的名称，类别，型号，进价/售价(默认为上年平均)，最近进价和最近售价留空），客户信息（客户分类，某一个客户的名称，联系方式等，应收应付(之前遗留)），银行账户信息（名称，余额）。<br/>
·PromotionCLientPO客户促销策略类：包括编号、类型、起始时间、结束时间、客户等级、代金卷、折让金额、赠品列表（编号、数量）。<br/>
·PromotionCLientPO客户促销策略类：包括编号、类型、起始时间、结束时间、客户等级、代金卷、折让金额、赠品列表（编号、数量）。<br/>
·PromotionGoodsPO组合包促销策略类：包括编号、类型、起始时间、结束时间、组合商品列表（编号、数量）、总价。<br/>
·PromotionTotalPO总价促销策略类：包括编号、类型、起始时间、结束时间、总价、代金卷、赠品列表（编号、数量）。<br/>
·UserPO用户类：包括用户名、密码、身份属性。<br/>
·LogPO日志类：包括执行者列表，行为列表，时间列表<br/>
·MessagePO系统信息类：包括发送者、接收者、信息列表<br/>

<br/>
<br/>
***********************************************
<br/>
<br/>

### 6.2 文件格式
统一用*.ser*格式，比如client.ser


