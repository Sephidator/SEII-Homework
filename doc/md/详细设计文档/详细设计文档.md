
详细设计文档——<br/>灯具进销存管理系统<br/><br/>软工二小组
=========================



<br/>
<br/>
<br/>

# 更新历史
| **修改人员**           | **日期**     | **变更原因** | **版本** |
| ------------------ | ---------- | -------- | ------ |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-10-29 | 最初版本     | V1.0   |

<br/>
<br/>
***********************************************
<br/>
<br/>

# 变更记录
| **修改人员**           | **日期**     | **变更原因** | **版本** | **变更内容** |
| ------------------ | ---------- | -------- | ------ | -------- |
| 陈骁、陈思彤、<br/>王宁、王颀涵 | 2017-10-29 | 初始版本     | V1.0   | 无        |

<br/>
<br/>
***********************************************
<br/>
<br/>

# 目录
	1.引言
		1.1 编制目的
		1.2 参考资料
	2.产品概述
	3.逻辑视角
	4.组合视角
		4.1 开发包图
		4.2 运行时进程
		4.3 物理部署
	5.接口视角
		5.1 模块的职责
		5.2 用户界面层的分解
		5.3 业务逻辑层的分解
		5.4 数据层的分解
	6.信息视角
		6.1 数据持久化对象
		6.2 Txt持久化格式
		6.3 数据库表

<br/>
<br/>
***********************************************
<br/>
<br/>

# 1.引言
## 1.1 编制目的
本报告详细完成灯具进销存管理系统的详细设计，达到指导后续软件构造的目的，同时实现和测试人员及用户的沟通。<br/>
本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

<br/>
<br/>
***********************************************
<br/>
<br/>

# 2.产品概述
参考灯具进销存管理系统用例文档和灯具进销存管理系统软件规格说明中对产品的概括描述。

<br/>
<br/>
***********************************************
<br/>
<br/>

# 3.体系结构设计概述
参考灯具进销存管理系统体系结构描述文档对体系结构设计的概述

<br/>
<br/>
***********************************************
<br/>
<br/>

# 4.结构视角
## 4.1 业务逻辑层的分解
业务逻辑层的开发包图参见软件体系结构描述文档的图3

### 4.1.1 goodssortbl模块
### 4.1.2 goodsbl模块
### 4.1.3 inventorybl模块

<br/>
<br/>
***********************************************
<br/>
<br/>

### 4.1.4 Clientbl模块
#### (1) 模块概述
Clientbl模块负责客户的管理，创建新的客户，删除客户，修改客户，查找客户。具体功能需求和非功能需求可参见需求规格说明文档和体系结构设计文档。

#### (2) 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加bussinesslogicservice.ClientBLlervice接口。业务逻辑层和数据层之间添加dataservice. ClientDataService接口。ClientPO是作为客户的持久化对象被添加到设计模型中去的。

clientbl模块的设计如图

![](pictures/clientbl/clientbl模块各个类的设计.png)

client模块各个类的职责如下表所示
| clientbl模块的类   | 职责                   |
| ------------- | -------------------- |
| Client        | 负责实现客户管理界面所需要的服务     |
| ClientOperate | 负责进行其他包的操作造成的客户数据的更改 |
| ClientInfo    | 负责为其他包提供客户的数据        |
| ClientTrans   | 负责转换客户信息的VO和PO       |

#### (3) 模块内部类的接口规范

##### Client的接口规范
| 提供的服务（供接口）            |      |                                          |
| --------------------- | ---- | ---------------------------------------- |
| `Client.searchClient` | 语法   | `public ArraytList<ClientVO> searchClient(String clientInfo)` |
|                       | 前置条件 | 正在进行客户管理                                 |
|                       | 后置条件 | 根据输入信息返回相应的客户                            |
| `Client.addClient`    | 语法   | `public ResultMessage addClient(ClientVO client)` |
|                       | 前置条件 | 正在进行客户管理                                 |
|                       | 后置条件 | 添加一个客户，更新客户列表                            |
| `Client.editClient`   | 语法   | `public ResultMessage editClient(ClientVO client)` |
|                       | 前置条件 | 正在进行客户管理                                 |
|                       | 后置条件 | 编辑一个客户，更新客户列表                            |
| `Client.deleteClient` | 语法   | `public ResultMessage deleteClient(String ID, String name)` |
|                       | 前置条件 | 正在进行客户管理                                 |
|                       | 后置条件 | 删除一个客户，更新客户列表                            |
| `Client.getClientID`  | 语法   | `public String getClientID()`            |
|                       | 前置条件 | 新建客户时                                    |
|                       | 后置条件 | 返回一个新的客户ID                               |

| 需要的服务（需接口）                               |                    |
| ---------------------------------------- | ------------------ |
| 服务名                                      | 服务                 |
| `ClientDataService.find(String clientInfo)` | 根据姓名和id进行查找多个持久化对象 |
| `ClientDataService.getList()`            | 取得持久化对象的列表         |
| `ClientDataService.insert(ClientPO po)`  | 添加单一化持久对象          |
| `ClientDataService.delete(ClientPO po)`  | 删除单一化持久对象          |
| `ClientDataService.update(ClientPO po)`  | 更改单一化持久对象          |
| `ClientInfoDataService.getClientID()`    | 得到新的客户ID           |

<br/>
<br/>
<br/>

##### ClientInfo的接口规范
| 提供的服务（供接口）                 |      |                                          |
| -------------------------- | ---- | ---------------------------------------- |
| `ClientInfo.getClientList` | 语法   | `public ArraytList<ClientVO> getClientList()` |
|                            | 前置条件 | 其他包需要取得客户信息                              |
|                            | 后置条件 | 根据输入信息返回相应的客户                            |

| 需要的服务（需接口）                               |                    |
| ---------------------------------------- | ------------------ |
| 服务名                                      | 服务                 |
| `ClientDataService.find(String clientInfo)` | 根据姓名和id进行查找多个持久化对象 |

<br/>
<br/>
<br/>

##### ClientOperate的接口规范
| 提供的服务（供接口）                 |      |                                          |
| -------------------------- | ---- | ---------------------------------------- |
| `ClientOperate.editClient` | 语法   | `public  editClient(ClientVO newClient)` |
|                            | 前置条件 | 其他包需要编辑客户信息                              |
|                            | 后置条件 | 更新客户信息                                   |

| 需要的服务（需接口）                              |           |
| --------------------------------------- | --------- |
| 服务名                                     | 服务        |
| `ClientDataService.update(ClientPO po)` | 更改单一化持久对象 |

<br/>
<br/>
<br/>

##### ClientTrans的接口规范
| 提供的服务（供接口）                |      |                                          |
| ------------------------- | ---- | ---------------------------------------- |
| `ClientTrans.getClientPO` | 语法   | `public ClientPO getClientPO(ClientVO client)` |
|                           | 前置条件 | 无                                        |
|                           | 后置条件 | 根据输入的vo生成相应的po                           |
| `ClientTrans.getClientVO` | 语法   | `public ClientVO getClientVO(ClientPO client)` |
|                           | 前置条件 | 无                                        |
|                           | 后置条件 | 根据输入的po生成相应的vo                           |

<br/>
<br/>
<br/>

#### (4) 业务逻辑层的动态模型
如图表明了进销存管理系统中，当进货销售人员想要添加一个客户的时候，客户管理业务逻辑处理的相关对象之间的协作。

![](pictures/clientbl/添加客户的顺序图.png)

如图表明了进销存管理系统中，当进货销售人员想要删除一个客户的时候，客户管理业务逻辑处理的相关对象之间的协作。

![](pictures/clientbl/删除客户的顺序图.png)

如图所示的状态图描述了Client对象的生存期间的状态序列、引起转移的事件，以及因状态转移而伴随的动作。

![](pictures/clientbl/Client对象状态图.png)

#### (5) 业务逻辑层的设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

<br/>
<br/>
***********************************************
<br/>
<br/>

### 4.1.5 purchasebl模块
#### (1) 模块概述
Purchasebl模块负责进货单、进货退货单的创建。具体功能需求和非功能需求可参见需求规格说明文档和体系结构设计文档。

#### (2) 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加bussinesslogicservice.PurchaseTradeBillBLlervice接口。业务逻辑层和数据层之间添加dataservice. PurchaseTradeBillDataService接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了PurchaseTradeBillController和PurchaseRefundBillController，这样相应的会将对单据的逻辑业务处理委托给PurchaseTradeBill和PurchaseRefundBill对象。PurchaseTradeBillPO以及PurchaseRefundBillPO是作为单据的持久化对象被添加到设计模型中去的。

purchasebl模块的设计如图

![](pictures/purchasebl/purchasebl模块各个类的设计.png)

purchasebl模块各个类的职责如下表所示
| purchase模块的类              | 职责                      |
| ------------------------- | ----------------------- |
| PurchaseTradeBill         | 负责实现制定进货单界面所需要的服务       |
| PurchaseTradeBillOperate  | 负责进行其他包的操作造成的进货单数据的更改   |
| PurchaseTradeBillInfo     | 负责为其他包提供进货单的数据          |
| PurchaseTradeBillTrans    | 负责转换进货单信息的VO和PO         |
| PurchaseRefundBill        | 负责实现制定进货单界面所需要的服务       |
| PurchaseRefundBillOperate | 负责进行其他包的操作造成的进货退货单数据的更改 |
| PurchaseRefundBillInfo    | 负责为其他包提供进货退货单的数据        |
| PurchaseRefundBillTrans   | 负责转换进货退货单信息的VO和PO       |

#### (3) 模块内部类的接口规范

##### PurchaseTradeBill的接口规范
| 提供的服务（供接口）                              |      |                                          |
| --------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseTradeBill.getID`               | 语法   | `public String getID ()`                 |
|                                         | 前置条件 | 开始制定进货单                                  |
|                                         | 后置条件 | 返回单据ID                                   |
| `PurchaseTradeBill.getClientList`       | 语法   | `public ArrayList<ClientVO> getClientList()` |
|                                         | 前置条件 | 开始制定进货单                                  |
|                                         | 后置条件 | 返回客户列表                                   |
| `PurchaseTradeBill.getRepositoryList`   | 语法   | `public ArrayList<ClientVO> getRepositoryList()` |
|                                         | 前置条件 | 开始制定进货单                                  |
|                                         | 后置条件 | 返回仓库列表                                   |
| `PurchaseTradeBill.getGoodsList`        | 语法   | `public ArrayList<ClientVO> getGoodsList()` |
|                                         | 前置条件 | 开始制定进货单                                  |
|                                         | 后置条件 | 返回商品列表                                   |
| `PurchaseTradeBill.calculateTotal`      | 语法   | `public double calculateTotal(ArrayList<GoodsVO> goodsList)` |
|                                         | 前置条件 | 添加商品                                     |
|                                         | 后置条件 | 计算商品总价                                   |
| `PurchaseTradeBill.submit`              | 语法   | `public ResultMessage submit(PurchaseTradeBillVO bill)` |
|                                         | 前置条件 | 制定单据完成                                   |
|                                         | 后置条件 | 单据被提交发送给经理进行审批                           |
| `PurchaseTradeBillController.saveDraft` | 语法   | `public ResultMessage saveDraft(PurchaseTradeBillVO bill)` |
|                                         | 前置条件 | 制定单据完成                                   |
|                                         | 后置条件 | 调保存单据草稿                                  |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `PurchaseTradeBillDataService.getList()` | 取得持久化对象的列表 |
| `PurchaseTradeBillDataService.insert(PurchaseTradeBillPO po)` | 插入单一持久化对象  |
| `PurchaseTradeBillDataService.getID()`   | 得到新的进货单ID  |
| `CLientInfo.getClientList()`             | 取得客户列表     |
| `InventoryInfo.getInventoryList()`       | 取得仓库列表     |
| `GoodsInfo.getGoodsList()`               | 取得商品列表     |

<br/>
<br/>
<br/>

##### PurchaseTradeBilInfo的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseTradeBillInfo.getPurchaseTradeBillList` | 语法   | `public ArraytList<PurchaseTradeBillVO> getPurchaseTradeBillList()` |
|                                          | 前置条件 | 其他包需要取得进货单信息                             |
|                                          | 后置条件 | 根据输入信息返回相应的进货单列表                         |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `PurchaseTradeBillDataService.getList()` | 取得持久化对象的列表 |

<br/>
<br/>
<br/>

##### PurchaseTradeBillOperate的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseTradeBill.editPurchaseTradeBill` | 语法   | `public  editPurchaseTradeBill(PurchaseTradeBillVO newPurchaseTradeBill)` |
|                                          | 前置条件 | 其他包需要编辑进货单信息                             |
|                                          | 后置条件 | 更新进货单信息                                  |

| 需要的服务（需接口）                               |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `PurchaseTradeBillDataService.update(PurchaseTradeBillPO po)` | 更改单一化持久对象 |

<br/>
<br/>
<br/>

##### PurchaseTradeBillTrans的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseTradeBillTrans.getPurchaseTradeBillPO` | 语法   | `public PurchaseTradeBillPO getPurchaseTradeBillPO(PurchaseTradeBillVO vo)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的vo生成相应的po                           |
| `PurchaseTradeBillTrans.getPurchaseTradeBillVO` | 语法   | `public PurchaseTradeBillVO getPurchaseTradeBillVO(PurchaseTradeBillPO po)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的po生成相应的vo                           |

<br/>
<br/>
<br/>

##### PurchaseRefundBill的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseRefundBill.getID`               | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `PurchaseRefundBill.getClientList`       | 语法   | `public ArrayList<ClientVO> getClientList()` |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回客户列表                                   |
| `PurchaseRefundBill.getRepositoryList`   | 语法   | `public ArrayList<ClientVO> getRepositoryList()` |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回仓库列表                                   |
| `PurchaseRefundBill.getGoodsList`        | 语法   | `public ArrayList<ClientVO> getGoodsList()` |
|                                          | 前置条件 | 开始制定进货单                                  |
|                                          | 后置条件 | 返回商品列表                                   |
| `PurchaseRefundBill.calculateTotal`      | 语法   | `public double calculateTotal(ArrayList<GoodsVO> goodsList)` |
|                                          | 前置条件 | 添加商品                                     |
|                                          | 后置条件 | 计算商品总价                                   |
| `PurchaseRefundBill.submit`              | 语法   | `public ResultMessage submit(PurchaseRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `PurchaseRefundBillController.saveDraft` | 语法   | `public ResultMessage saveDraft(PurchaseRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 调保存单据草稿                                  |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `PurchaseRefundBillDataService.getList()` | 取得持久化对象的列表 |
| `PurchaseRefundBillDataService.insert(PurchaseRefundBillPO po)` | 插入单一持久化对象  |
| `PurchaseRefundBillDataService.getID()`  | 得到新的进货单ID  |
| `CLientInfo.getClientList()`             | 取得客户列表     |
| `InventoryInfo.getInventoryList()`       | 取得仓库列表     |
| `GoodsInfo.getGoodsList()`               | 取得商品列表     |

<br/>
<br/>
<br/>

##### PurchaseRefundBilInfo的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseRefundBillInfo.getPurchaseRefundBillList` | 语法   | `public ArraytList<PurchaseRefundBillVO> getPurchaseRefundBillList()` |
|                                          | 前置条件 | 其他包需要取得进货单信息                             |
|                                          | 后置条件 | 根据输入信息返回相应的进货单列表                         |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `PurchaseRefundBillDataService.getList()` | 取得持久化对象的列表 |

<br/>
<br/>
<br/>

##### PurchaseRefundBillOperate的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseRefundBill.editPurchaseRefundBill` | 语法   | `public  editPurchaseRefundBill(PurchaseRefundBillVO newPurchaseRefundBill)` |
|                                          | 前置条件 | 其他包需要编辑进货单信息                             |
|                                          | 后置条件 | 更新进货单信息                                  |

| 需要的服务（需接口）                               |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `PurchaseRefundBillDataService.update(PurchaseRefundBillPO po)` | 更改单一化持久对象 |

<br/>
<br/>
<br/>

##### PurchaseRefundBillTrans的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `PurchaseRefundBillTrans.getPurchaseRefundBillPO` | 语法   | `public PurchaseRefundBillPO getPurchaseRefundBillPO(PurchaseRefundBillVO vo)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的vo生成相应的po                           |
| `PurchaseRefundBillTrans.getPurchaseRefundBillVO` | 语法   | `public PurchaseRefundBillVO getPurchaseRefundBillVO(PurchaseRefundBillPO po)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的po生成相应的vo                           |

<br/>
<br/>
<br/>

#### (4) 业务逻辑层的动态模型
如图表明了进销存管理系统中，当制定进货销售单需要取得商品列表的时候，制定进货单业务逻辑处理的相关对象之间的协作。

![](pictures/purchasebl/取得商品列表的顺序图.png)

如图表明了进销存管理系统中，当进货销售人员想要提交进货单的时候，制定进货单业务逻辑处理的相关对象之间的协作。

![](pictures/purchasebl/提交进货单的顺序图.png)

如图所示的状态图描述了Purchase对象生存期间的状态序列、引起转移的事件，以及因状态转移而伴随的动作。

![](pictures/purchasebl/Purchase对象状态图.png)

#### (5) 业务逻辑层的设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

### 4.1.6 salebl模块
#### (1) 模块概述
salebl模块负责销售单、销售退货单的创建。具体功能需求和非功能需求可参见需求规格说明文档和体系结构设计文档。

#### (2) 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加bussinesslogicservice.SaleTradeBillBLlervice接口。业务逻辑层和数据层之间添加dataservice. SaleTradeBillDataService接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了SaleTradeBillController和SaleRefundBillController，这样相应的Controller会将对单据的逻辑业务处理委托给SaleTradeBill和SaleRefundBill对象。SaleTradeBillPO以及SaleRefundBillPO是作为单据的持久化对象被添加到设计模型中去的。

salebl模块的设计如图

![](pictures/salebl/salebl模块各个类的设计.png)

salebl模块各个类的职责如下表所示
| sale模块的类              | 职责                      |
| ------------------------- | ----------------------- |
| SaleTradeBill         | 负责实现制定销售单界面所需要的服务       |
| SaleTradeBillOperate  | 负责进行其他包的操作造成的销售单数据的更改   |
| SaleTradeBillInfo     | 负责为其他包提供销售单的数据          |
| SaleTradeBillTrans    | 负责转换销售单信息的VO和PO         |
| SaleRefundBill        | 负责实现制定销售单界面所需要的服务       |
| SaleRefundBillOperate | 负责进行其他包的操作造成的销售退货单数据的更改 |
| SaleRefundBillInfo    | 负责为其他包提供销售退货单的数据        |
| SaleRefundBillTrans   | 负责转换销售退货单信息的VO和PO       |

#### (3) 模块内部类的接口规范

##### SaleTradeBill的接口规范
| 提供的服务（供接口）                              |      |                                          |
| --------------------------------------- | ---- | ---------------------------------------- |
| `SaleTradeBill.getID`               | 语法   | `public String getID ()`                 |
|                                         | 前置条件 | 开始制定销售单                                  |
|                                         | 后置条件 | 返回单据ID                                   |
| `SaleTradeBill.getClientList`       | 语法   | `public ArrayList<ClientVO> getClientList()` |
|                                         | 前置条件 | 开始制定销售单                                  |
|                                         | 后置条件 | 返回客户列表                                   |
| `SaleTradeBill.getRepositoryList`   | 语法   | `public ArrayList<ClientVO> getRepositoryList()` |
|                                         | 前置条件 | 开始制定销售单                                  |
|                                         | 后置条件 | 返回仓库列表                                   |
| `SaleTradeBill.getPromotionList`        | 语法   | `public ArrayList<PromotionVO> getPromotionList()` |
|                                         | 前置条件 | 开始制定销售单                                  |
|                                         | 后置条件 | 返回促销策略列表                                   |
| `SaleTradeBill.getGoodsList`        | 语法   | `public ArrayList<ClientVO> getGoodsList()` |
|                                         | 前置条件 | 开始制定销售单                                  |
|                                         | 后置条件 | 返回商品列表                                   |
| `SaleTradeBill.calculateTotal`      | 语法   | `public double calculateTotal(ArrayList<GoodsVO> goodsList)` |
|                                         | 前置条件 | 添加商品                                     |
|                                         | 后置条件 | 计算商品总价                                   |
| `SaleTradeBill.submit`              | 语法   | `public ResultMessage submit(SaleTradeBillVO bill)` |
|                                         | 前置条件 | 制定单据完成                                   |
|                                         | 后置条件 | 单据被提交发送给经理进行审批                           |
| `SaleTradeBill.saveDraft` | 语法   | `public ResultMessage saveDraft(SaleTradeBillVO bill)` |
|                                         | 前置条件 | 制定单据完成                                   |
|                                         | 后置条件 | 调保存单据草稿                                  |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `SaleTradeBillDataService.getList()` | 取得持久化对象的列表 |
| `SaleTradeBillDataService.insert(SaleTradeBillPO po)` | 插入单一持久化对象  |
| `SaleTradeBillDataService.getID()`   | 得到新的销售单ID  |
| `ClientInfo.getClientList()`             | 取得客户列表     |
| `InventoryInfo.getInventoryList()`       | 取得仓库列表     |
| `GoodsInfo.getGoodsList()`               | 取得商品列表     |
| `GoodsInfo.getPromotionList()`               | 取得促销策略列表     |

<br/>
<br/>
<br/>

##### SaleTradeBilInfo的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleTradeBillInfo.getSaleTradeBillList` | 语法   | `public ArraytList<SaleTradeBillVO> getSaleTradeBillList()` |
|                                          | 前置条件 | 其他包需要取得销售单信息                             |
|                                          | 后置条件 | 根据输入信息返回相应的销售单列表                         |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `SaleTradeBillDataService.getList()` | 取得持久化对象的列表 |

<br/>
<br/>
<br/>

##### SaleTradeBillOperate的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleTradeBill.editSaleTradeBill` | 语法   | `public  editSaleTradeBill(SaleTradeBillVO newSaleTradeBill)` |
|                                          | 前置条件 | 其他包需要编辑销售单信息                             |
|                                          | 后置条件 | 更新销售单信息                                  |

| 需要的服务（需接口）                               |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `SaleTradeBillDataService.update(SaleTradeBillPO po)` | 更改单一化持久对象 |

<br/>
<br/>
<br/>

##### SaleTradeBillTrans的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleTradeBillTrans.getSaleTradeBillPO` | 语法   | `public SaleTradeBillPO getSaleTradeBillPO(SaleTradeBillVO vo)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的vo生成相应的po                           |
| `SaleTradeBillTrans.getSaleTradeBillVO` | 语法   | `public SaleTradeBillVO getSaleTradeBillVO(SaleTradeBillPO po)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的po生成相应的vo                           |

<br/>
<br/>
<br/>

##### SaleRefundBill的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleRefundBill.getID`               | 语法   | `public String getID ()`                 |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回单据ID                                   |
| `SaleRefundBill.getClientList`       | 语法   | `public ArrayList<ClientVO> getClientList()` |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回客户列表                                   |
| `SaleRefundBill.getRepositoryList`   | 语法   | `public ArrayList<ClientVO> getRepositoryList()` |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回仓库列表                                   |
| `SaleRefundBill.getGoodsList`        | 语法   | `public ArrayList<ClientVO> getGoodsList()` |
|                                          | 前置条件 | 开始制定销售单                                  |
|                                          | 后置条件 | 返回商品列表                                   |
| `SaleRefundBill.calculateTotal`      | 语法   | `public double calculateTotal(ArrayList<GoodsVO> goodsList)` |
|                                          | 前置条件 | 添加商品                                     |
|                                          | 后置条件 | 计算商品总价                                   |
| `SaleRefundBill.submit`              | 语法   | `public ResultMessage submit(SaleRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 单据被提交发送给经理进行审批                           |
| `SaleRefundBill.saveDraft` | 语法   | `public ResultMessage saveDraft(SaleRefundBillVO bill)` |
|                                          | 前置条件 | 制定单据完成                                   |
|                                          | 后置条件 | 调保存单据草稿                                  |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `SaleRefundBillDataService.getList()` | 取得持久化对象的列表 |
| `SaleRefundBillDataService.insert(SaleRefundBillPO po)` | 插入单一持久化对象  |
| `SaleRefundBillDataService.getID()`  | 得到新的销售单ID  |
| `ClientInfo.getClientList()`             | 取得客户列表     |
| `InventoryInfo.getInventoryList()`       | 取得仓库列表     |
| `GoodsInfo.getGoodsList()`               | 取得商品列表     |

<br/>
<br/>
<br/>

##### SaleRefundBilInfo的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleRefundBillInfo.getSaleRefundBillList` | 语法   | `public ArraytList<SaleRefundBillVO> getSaleRefundBillList()` |
|                                          | 前置条件 | 其他包需要取得销售单信息                             |
|                                          | 后置条件 | 根据输入信息返回相应的销售单列表                         |

| 需要的服务（需接口）                               |            |
| ---------------------------------------- | ---------- |
| 服务名                                      | 服务         |
| `SaleRefundBillDataService.getList()` | 取得持久化对象的列表 |

<br/>
<br/>
<br/>

##### SaleRefundBillOperate的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleRefundBill.editSaleRefundBill` | 语法   | `public  editSaleRefundBill(SaleRefundBillVO newSaleRefundBill)` |
|                                          | 前置条件 | 其他包需要编辑销售单信息                             |
|                                          | 后置条件 | 更新销售单信息                                  |

| 需要的服务（需接口）                               |           |
| ---------------------------------------- | --------- |
| 服务名                                      | 服务        |
| `SaleRefundBillDataService.update(SaleRefundBillPO po)` | 更改单一化持久对象 |

<br/>
<br/>
<br/>

##### SaleRefundBillTrans的接口规范
| 提供的服务（供接口）                               |      |                                          |
| ---------------------------------------- | ---- | ---------------------------------------- |
| `SaleRefundBillTrans.getSaleRefundBillPO` | 语法   | `public SaleRefundBillPO getSaleRefundBillPO(SaleRefundBillVO vo)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的vo生成相应的po                           |
| `SaleRefundBillTrans.getSaleRefundBillVO` | 语法   | `public SaleRefundBillVO getSaleRefundBillVO(SaleRefundBillPO po)` |
|                                          | 前置条件 | 无                                        |
|                                          | 后置条件 | 根据输入的po生成相应的vo                           |

<br/>
<br/>
<br/>

#### (4) 业务逻辑层的动态模型
如图表明了进销存管理系统中，当制定进货销售单需要取得商品列表的时候，制定销售单业务逻辑处理的相关对象之间的协作。

![](pictures/salebl/取得商品列表的顺序图.png)

如图表明了进销存管理系统中，当进货销售人员想要提交销售单的时候，制定销售单业务逻辑处理的相关对象之间的协作。

![](pictures/salebl/提交销售单的顺序图.png)

如图所示的状态图描述了Sale对象生存期间的状态序列、引起转移的事件，以及因状态转移而伴随的动作。

![](pictures/salebl/Sale对象状态图.png)

#### (5) 业务逻辑层的设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

### 4.1.7 accountbl模块
### 4.1.8 financebl模块
### 4.1.9 initialbl模块
### 4.1.10 reportbl模块
### 4.1.11 approvalbl模块
### 4.1.12 promotionbl模块
### 4.1.13 userbl模块
### 4.1.14 editbillbl模块
### 4.1.15 systemfunctionbl模块/
